<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicPlay Professional</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="/_sdk/element_sdk.js"></script>
    <script src="/_sdk/data_sdk.js"></script><!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, push, set, remove, onValue, off } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD2uryhbal6zUmbhAyfUoElJaE5CyMIwfM",
            authDomain: "dengoplay-9defc.firebaseapp.com",
            databaseURL: "https://dengoplay-9defc-default-rtdb.firebaseio.com",
            projectId: "dengoplay-9defc",
            storageBucket: "dengoplay-9defc.firebasestorage.app",
            messagingSenderId: "933875447662",
            appId: "1:933875447662:web:9e073c0fc0b092be90b37f",
            measurementId: "G-JQLHXD6QEW"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        // Make Firebase available globally
        window.firebaseDB = database;
        window.firebaseRef = ref;
        window.firebasePush = push;
        window.firebaseSet = set;
        window.firebaseRemove = remove;
        window.firebaseOnValue = onValue;
        window.firebaseOff = off;
        window.firebaseConnected = true;
    </script>
    <style>
        body {
            box-sizing: border-box;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #121212;
            color: #ffffff;
            overflow-x: hidden;
            height: 100%;
        }

        /* Animated Background Themes */
        .theme-sweater {
            background: linear-gradient(135deg, #050a15 0%, #0d1a2f 100%);
            position: relative;
        }

        .theme-sunset {
            background: linear-gradient(135deg, #1a0a0f 0%, #2f1520 100%);
            position: relative;
        }

        .theme-forest {
            background: linear-gradient(135deg, #0a150a 0%, #152f15 100%);
            position: relative;
        }

        .theme-purple {
            background: linear-gradient(135deg, #150a1a 0%, #2f1540 100%);
            position: relative;
        }

        .theme-ocean {
            background: linear-gradient(135deg, #0a1520 0%, #153040 100%);
            position: relative;
        }

        .theme-gold {
            background: linear-gradient(135deg, #1a1510 0%, #2f2515 100%);
            position: relative;
        }

        .theme-platinum {
            background: linear-gradient(135deg, #0f0f0f 0%, #2a2a2a 100%);
            position: relative;
        }

        .theme-charcoal {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            position: relative;
        }

        .theme-rose {
            background: linear-gradient(135deg, #1a0f15 0%, #2f1525 100%);
            position: relative;
        }

        .theme-emerald {
            background: linear-gradient(135deg, #0f1a0f 0%, #1a2f1a 100%);
            position: relative;
        }

        .theme-sapphire {
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2f 100%);
            position: relative;
        }

        .theme-copper {
            background: linear-gradient(135deg, #1a1210 0%, #2f2015 100%);
            position: relative;
        }

        /* Animated Background Effects */
        .theme-sweater::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(147, 197, 253, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(96, 165, 250, 0.25) 0%, transparent 50%);
            animation: pulseBlue 8s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-sunset::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 30% 40%, rgba(251, 146, 60, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(239, 68, 68, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(245, 101, 101, 0.25) 0%, transparent 50%);
            animation: pulseSunset 10s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-forest::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 25% 35%, rgba(34, 197, 94, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 75% 65%, rgba(74, 222, 128, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 45% 75%, rgba(16, 185, 129, 0.25) 0%, transparent 50%);
            animation: pulseForest 9s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-purple::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 35% 25%, rgba(147, 51, 234, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 65% 75%, rgba(168, 85, 247, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 20% 70%, rgba(196, 181, 253, 0.25) 0%, transparent 50%);
            animation: pulsePurple 11s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-ocean::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 40% 30%, rgba(14, 165, 233, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 60% 70%, rgba(56, 189, 248, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 40%, rgba(125, 211, 252, 0.25) 0%, transparent 50%);
            animation: pulseOcean 12s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-gold::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 30% 50%, rgba(245, 158, 11, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(251, 191, 36, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(252, 211, 77, 0.25) 0%, transparent 50%);
            animation: pulseGold 10s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-platinum::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 25% 40%, rgba(229, 231, 235, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 75% 60%, rgba(209, 213, 219, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(243, 244, 246, 0.25) 0%, transparent 50%);
            animation: pulsePlatinum 11s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-charcoal::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 35% 30%, rgba(75, 85, 99, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 65% 70%, rgba(55, 65, 81, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 20% 80%, rgba(107, 114, 128, 0.35) 0%, transparent 50%);
            animation: pulseCharcoal 9s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-rose::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 40% 35%, rgba(244, 63, 94, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 60% 65%, rgba(251, 113, 133, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 30% 70%, rgba(252, 165, 165, 0.25) 0%, transparent 50%);
            animation: pulseRose 12s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-emerald::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 30% 25%, rgba(16, 185, 129, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 75%, rgba(52, 211, 153, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 45% 60%, rgba(110, 231, 183, 0.25) 0%, transparent 50%);
            animation: pulseEmerald 10s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-sapphire::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 40%, rgba(37, 99, 235, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 60%, rgba(59, 130, 246, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(147, 197, 253, 0.25) 0%, transparent 50%);
            animation: pulseSapphire 11s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        .theme-copper::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 35% 45%, rgba(194, 65, 12, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 65% 25%, rgba(234, 88, 12, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 75%, rgba(251, 146, 60, 0.25) 0%, transparent 50%);
            animation: pulseCopper 13s ease-in-out infinite;
            pointer-events: none;
            z-index: -2;
        }

        /* Floating Particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            opacity: 0;
            animation: floatParticles 15s linear infinite;
        }

        .theme-sweater .particle {
            background: rgba(147, 197, 253, 0.8);
            box-shadow: 0 0 10px rgba(147, 197, 253, 0.5);
        }

        .theme-sunset .particle {
            background: rgba(251, 146, 60, 0.8);
            box-shadow: 0 0 10px rgba(251, 146, 60, 0.5);
        }

        .theme-forest .particle {
            background: rgba(74, 222, 128, 0.8);
            box-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
        }

        .theme-purple .particle {
            background: rgba(168, 85, 247, 0.8);
            box-shadow: 0 0 10px rgba(168, 85, 247, 0.5);
        }

        .theme-ocean .particle {
            background: rgba(56, 189, 248, 0.8);
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }

        .theme-gold .particle {
            background: rgba(251, 191, 36, 0.8);
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
        }

        .theme-platinum .particle {
            background: rgba(229, 231, 235, 0.8);
            box-shadow: 0 0 10px rgba(229, 231, 235, 0.5);
        }

        .theme-charcoal .particle {
            background: rgba(107, 114, 128, 0.8);
            box-shadow: 0 0 10px rgba(107, 114, 128, 0.5);
        }

        .theme-rose .particle {
            background: rgba(251, 113, 133, 0.8);
            box-shadow: 0 0 10px rgba(251, 113, 133, 0.5);
        }

        .theme-emerald .particle {
            background: rgba(52, 211, 153, 0.8);
            box-shadow: 0 0 10px rgba(52, 211, 153, 0.5);
        }

        .theme-sapphire .particle {
            background: rgba(59, 130, 246, 0.8);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }

        .theme-copper .particle {
            background: rgba(234, 88, 12, 0.8);
            box-shadow: 0 0 10px rgba(234, 88, 12, 0.5);
        }

        /* Keyframe Animations */
        @keyframes pulseBlue {

            0%,
            100% {
                opacity: 0.6;
                transform: scale(1);
            }

            50% {
                opacity: 0.9;
                transform: scale(1.1);
            }
        }

        @keyframes pulseSunset {

            0%,
            100% {
                opacity: 0.5;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.05) rotate(2deg);
            }
        }

        @keyframes pulseForest {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.08);
            }
        }

        @keyframes pulsePurple {

            0%,
            100% {
                opacity: 0.6;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 0.9;
                transform: scale(1.12) rotate(-1deg);
            }
        }

        @keyframes pulseOcean {

            0%,
            100% {
                opacity: 0.5;
                transform: scale(1);
            }

            50% {
                opacity: 0.85;
                transform: scale(1.15);
            }
        }

        @keyframes pulseGold {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 1;
                transform: scale(1.1) rotate(1deg);
            }
        }

        @keyframes pulsePlatinum {

            0%,
            100% {
                opacity: 0.6;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 0.9;
                transform: scale(1.08) rotate(-0.5deg);
            }
        }

        @keyframes pulseCharcoal {

            0%,
            100% {
                opacity: 0.8;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.05);
            }
        }

        @keyframes pulseRose {

            0%,
            100% {
                opacity: 0.5;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 0.85;
                transform: scale(1.12) rotate(1.5deg);
            }
        }

        @keyframes pulseEmerald {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.09);
            }
        }

        @keyframes pulseSapphire {

            0%,
            100% {
                opacity: 0.6;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 0.9;
                transform: scale(1.1) rotate(-1deg);
            }
        }

        @keyframes pulseCopper {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1) rotate(0deg);
            }

            50% {
                opacity: 1;
                transform: scale(1.07) rotate(0.8deg);
            }
        }

        @keyframes floatParticles {
            0% {
                transform: translateY(100vh) translateX(0px);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        /* Main Layout */
        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        /* Sidebar */
        .sidebar {
            width: 240px;
            background: #000000;
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100%;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar.mobile-hidden {
            transform: translateX(-100%);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
            padding: 0 8px;
        }

        .logo i {
            font-size: 28px;
            color: #1DB954;
        }

        .logo span {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            color: #b3b3b3;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-weight: 500;
            cursor: pointer;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-link i {
            font-size: 20px;
            width: 20px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 24px;
            padding-bottom: 120px;
            overflow-y: auto;
            height: 100vh;
            position: relative;
        }

        /* Lyrics Sidebar */
        .lyrics-sidebar {
            position: fixed;
            top: 20px;
            right: -320px;
            width: 300px;
            height: calc(100vh - 140px);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.75));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            z-index: 90;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .lyrics-sidebar.show {
            right: 20px;
        }

        .lyrics-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }

        .lyrics-title {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            background: linear-gradient(135deg, #1DB954, #1ed760);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .close-lyrics-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #b3b3b3;
            font-size: 16px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-lyrics-btn:hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .lyrics-content {
            line-height: 1.8;
            font-size: 14px;
        }

        .lyric-line {
            padding: 16px 20px;
            margin: 12px 0;
            border-radius: 16px;
            transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0;
            transform: translateY(30px) scale(0.9);
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            font-weight: 400;
            color: #a0a0a0;
            visibility: hidden;
            filter: blur(2px);
        }

        .lyric-line.current {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1.05);
            background: linear-gradient(135deg, rgba(29, 185, 84, 0.35), rgba(30, 215, 96, 0.25));
            border: 2px solid rgba(29, 185, 84, 0.6);
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 3px 12px rgba(29, 185, 84, 0.5);
            box-shadow: 0 8px 32px rgba(29, 185, 84, 0.3), 0 0 20px rgba(29, 185, 84, 0.2);
            filter: blur(0px);
            animation: lyricPulse 2s ease-in-out infinite alternate;
        }

        .lyric-line.passed {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-20px) scale(0.85);
            background: rgba(255, 255, 255, 0.01);
            border: 1px solid rgba(255, 255, 255, 0.03);
            filter: blur(3px);
        }

        .lyric-line.next {
            opacity: 0.2;
            visibility: visible;
            transform: translateY(15px) scale(0.95);
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #c0c0c0;
            filter: blur(1px);
        }

        @keyframes lyricPulse {
            0% {
                text-shadow: 0 3px 12px rgba(29, 185, 84, 0.5);
                box-shadow: 0 8px 32px rgba(29, 185, 84, 0.3), 0 0 20px rgba(29, 185, 84, 0.2);
            }

            100% {
                text-shadow: 0 4px 16px rgba(29, 185, 84, 0.7);
                box-shadow: 0 12px 40px rgba(29, 185, 84, 0.4), 0 0 30px rgba(29, 185, 84, 0.3);
            }
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 200;
            background: rgba(0, 0, 0, 0.8);
            border: none;
            color: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
        }

        /* Header */
        .header {
            margin-bottom: 32px;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 24px;
        }

        .search-container {
            position: relative;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 48px;
            border: none;
            border-radius: 24px;
            background: #ffffff;
            color: #000000;
            font-size: 14px;
            font-weight: 500;
        }

        .search-input::placeholder {
            color: #666666;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #666666;
            font-size: 16px;
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Music Grid */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .music-card {
            background: #181818;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }

        .music-card:hover {
            background: #282828;
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .music-card.favorite {
            border-color: rgba(29, 185, 84, 0.5);
        }

        .music-card-cover {
            width: 100%;
            aspect-ratio: 1;
            background: linear-gradient(135deg, #1DB954, #1ed760);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .music-card-cover i {
            font-size: 40px;
            color: rgba(255, 255, 255, 0.8);
        }

        .play-button {
            position: absolute;
            bottom: 8px;
            right: 8px;
            width: 40px;
            height: 40px;
            background: #1DB954;
            border: none;
            border-radius: 50%;
            color: #000000;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transform: translateY(8px);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(29, 185, 84, 0.4);
        }

        .music-card:hover .play-button {
            opacity: 1;
            transform: translateY(0);
        }

        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(29, 185, 84, 0.6);
        }

        .favorite-button {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 32px;
            height: 32px;
            background: rgba(0, 0, 0, 0.6);
            border: none;
            border-radius: 50%;
            color: #b3b3b3;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-card:hover .favorite-button {
            opacity: 1;
        }

        .favorite-button.active {
            color: #1DB954;
            opacity: 1;
        }

        .music-card-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-card-artist {
            font-size: 14px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Player */
        .player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 90px;
            background: #181818;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            padding: 0 16px;
            z-index: 50;
        }

        .player-left {
            flex: 0 0 30%;
            display: flex;
            align-items: center;
            gap: 16px;
            min-width: 0;
        }

        .player-cover {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #1DB954, #1ed760);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .player-cover i {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.8);
        }

        .player-info {
            min-width: 0;
            flex: 1;
        }

        .player-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-artist {
            font-size: 12px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-center {
            flex: 0 0 40%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .control-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 8px;
        }

        .control-btn:hover {
            color: #ffffff;
            transform: scale(1.1);
        }

        .control-btn.active {
            color: #1DB954;
        }

        .play-pause-btn {
            width: 32px;
            height: 32px;
            background: #ffffff;
            border: none;
            border-radius: 50%;
            color: #000000;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .play-pause-btn:hover {
            transform: scale(1.05);
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            max-width: 500px;
        }

        .progress-time {
            font-size: 11px;
            color: #b3b3b3;
            min-width: 40px;
            text-align: center;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .player-right {
            flex: 0 0 30%;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 12px;
        }

        .lyrics-toggle-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 8px;
        }

        .lyrics-toggle-btn:hover,
        .lyrics-toggle-btn.active {
            color: #1DB954;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .volume-btn:hover {
            color: #ffffff;
        }

        .volume-bar {
            width: 80px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .volume-fill {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 100%;
            transition: width 0.1s ease;
        }

        /* Password Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: #282828;
            border-radius: 16px;
            padding: 32px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            transform: scale(0.9);
            transition: all 0.3s ease;
        }

        .modal-overlay.show .modal {
            transform: scale(1);
        }

        .modal-icon {
            font-size: 48px;
            color: #1DB954;
            margin-bottom: 16px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            color: #b3b3b3;
            margin-bottom: 24px;
        }

        .password-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #181818;
            color: #ffffff;
            font-size: 16px;
            margin-bottom: 24px;
            transition: all 0.2s ease;
        }

        .password-input:focus {
            outline: none;
            border-color: #1DB954;
        }

        .password-input.error {
            border-color: #e22e2e;
            animation: shake 0.5s ease-in-out;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn.primary {
            background: #1DB954;
            color: #000000;
        }

        .modal-btn.primary:hover {
            background: #1ed760;
            transform: scale(1.02);
        }

        .modal-btn.secondary {
            background: transparent;
            color: #ffffff;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .modal-btn.secondary:hover {
            border-color: rgba(255, 255, 255, 0.6);
        }

        /* Management Panel */
        .management-panel {
            position: fixed;
            top: 0;
            right: -500px;
            width: 500px;
            height: 100%;
            background: #181818;
            z-index: 200;
            transition: right 0.3s ease;
            overflow-y: auto;
            border-left: 1px solid rgba(255, 255, 255, 0.1);
        }

        .management-panel.show {
            right: 0;
        }

        .panel-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-panel-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .close-panel-btn:hover {
            color: #ffffff;
        }

        .panel-content {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #282828;
            color: #ffffff;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #1DB954;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .icon-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .icon-option {
            aspect-ratio: 1;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #282828;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 20px;
            color: #b3b3b3;
        }

        .icon-option:hover,
        .icon-option.selected {
            border-color: #1DB954;
            color: #1DB954;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 12px;
        }

        .theme-option {
            aspect-ratio: 16/9;
            border: 3px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .theme-option:hover {
            border-color: rgba(29, 185, 84, 0.7);
            transform: scale(1.05);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        .theme-option.selected {
            border-color: #1DB954;
            transform: scale(1.08);
            box-shadow: 0 8px 32px rgba(29, 185, 84, 0.4);
        }

        .theme-option::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .theme-option.selected::after {
            opacity: 1;
            background: #1DB954;
            box-shadow: 0 0 20px rgba(29, 185, 84, 0.6);
        }

        .theme-option.sweater {
            background: linear-gradient(135deg, #050a15 0%, #0d1a2f 100%);
        }

        .theme-option.sunset {
            background: linear-gradient(135deg, #1a0a0f 0%, #2f1520 100%);
        }

        .theme-option.forest {
            background: linear-gradient(135deg, #0a150a 0%, #152f15 100%);
        }

        .theme-option.purple {
            background: linear-gradient(135deg, #150a1a 0%, #2f1540 100%);
        }

        .theme-option.ocean {
            background: linear-gradient(135deg, #0a1520 0%, #153040 100%);
        }

        .theme-option.gold {
            background: linear-gradient(135deg, #1a1510 0%, #2f2515 100%);
        }

        .theme-option.platinum {
            background: linear-gradient(135deg, #0f0f0f 0%, #2a2a2a 100%);
        }

        .theme-option.charcoal {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        }

        .theme-option.rose {
            background: linear-gradient(135deg, #1a0f15 0%, #2f1525 100%);
        }

        .theme-option.emerald {
            background: linear-gradient(135deg, #0f1a0f 0%, #1a2f1a 100%);
        }

        .theme-option.sapphire {
            background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2f 100%);
        }

        .theme-option.copper {
            background: linear-gradient(135deg, #1a1210 0%, #2f2015 100%);
        }

        .add-music-btn {
            width: 100%;
            padding: 16px;
            background: #1DB954;
            color: #000000;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 24px;
        }

        .add-music-btn:hover {
            background: #1ed760;
            transform: scale(1.02);
        }

        .music-list {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 24px;
        }

        .music-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 8px;
            transition: all 0.2s ease;
        }

        .music-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .music-item-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #1DB954, #1ed760);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            flex-shrink: 0;
        }

        .music-item-info {
            flex: 1;
            min-width: 0;
        }

        .music-item-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .music-item-artist {
            font-size: 12px;
            color: #b3b3b3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 16px;
            cursor: pointer;
            padding: 8px;
            transition: all 0.2s ease;
        }

        .delete-btn:hover {
            color: #e22e2e;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: #ffffff;
            color: #000000;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            z-index: 1001;
            transform: translateX(calc(100% + 50px));
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 2px solid #1DB954;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        .toast.error {
            background: #ffffff;
            color: #000000;
            border: 2px solid #e22e2e;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #1DB954;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Animations */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 64px 24px;
            color: #b3b3b3;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 8px;
            color: #ffffff;
        }

        /* File Upload Area */
        .file-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 32px;
            text-align: center;
            margin-bottom: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload-area:hover,
        .file-upload-area.dragover {
            border-color: #1DB954;
            background: rgba(29, 185, 84, 0.1);
        }

        .file-upload-area i {
            font-size: 48px;
            color: #1DB954;
            margin-bottom: 16px;
        }

        .file-upload-area h3 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .file-upload-area p {
            color: #b3b3b3;
            font-size: 14px;
        }

        .file-input {
            display: none;
        }

        /* Mobile First Responsive Design */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 200;
                background: rgba(0, 0, 0, 0.95);
                border: 2px solid rgba(29, 185, 84, 0.8);
                color: #1DB954;
                padding: 16px;
                border-radius: 16px;
                font-size: 20px;
                cursor: pointer;
                backdrop-filter: blur(15px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
                transition: all 0.3s ease;
            }

            .mobile-menu-toggle:hover {
                background: rgba(29, 185, 84, 0.1);
                transform: scale(1.05);
            }

            .sidebar {
                transform: translateX(-100%);
                width: 300px;
                backdrop-filter: blur(25px);
                background: rgba(0, 0, 0, 0.98);
                border-right: 2px solid rgba(29, 185, 84, 0.3);
            }

            .sidebar.show {
                transform: translateX(0);
                box-shadow: 8px 0 40px rgba(0, 0, 0, 0.6);
            }

            .main-content {
                margin-left: 0;
                padding: 80px 16px 140px;
            }

            .header {
                margin-bottom: 24px;
                text-align: center;
            }

            .welcome-title {
                font-size: 28px;
                margin-bottom: 20px;
                background: linear-gradient(135deg, #1DB954, #1ed760);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .search-container {
                max-width: 100%;
                margin: 0 auto;
            }

            .search-input {
                padding: 16px 20px 16px 52px;
                font-size: 16px;
                border-radius: 30px;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            }

            .search-icon {
                left: 20px;
                font-size: 18px;
            }

            .lyrics-sidebar {
                width: calc(100% - 32px);
                right: -100%;
                padding: 20px;
                top: 90px;
                height: calc(100vh - 240px);
                border-radius: 20px;
                margin: 0 16px;
                background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.85));
                backdrop-filter: blur(30px);
                border: 2px solid rgba(29, 185, 84, 0.3);
                box-shadow: 0 16px 48px rgba(0, 0, 0, 0.6);
            }

            .lyrics-sidebar.show {
                right: 0;
                animation: slideInRight 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }

                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            .music-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-bottom: 24px;
            }

            .music-card {
                padding: 12px;
                border-radius: 16px;
                background: rgba(24, 24, 24, 0.8);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .music-card:hover {
                transform: translateY(-2px);
                background: rgba(40, 40, 40, 0.9);
            }

            .music-card-cover {
                margin-bottom: 12px;
                border-radius: 12px;
            }

            .music-card-cover i {
                font-size: 28px;
            }

            .play-button {
                width: 44px;
                height: 44px;
                font-size: 16px;
                bottom: 12px;
                right: 12px;
            }

            .favorite-button {
                width: 36px;
                height: 36px;
                top: 12px;
                right: 12px;
                font-size: 16px;
            }

            .music-card-title {
                font-size: 14px;
                font-weight: 600;
                margin-bottom: 4px;
            }

            .music-card-artist {
                font-size: 12px;
            }

            /* Mobile Player Ultra-Responsive Design */
            .player {
                height: auto;
                min-height: 120px;
                padding: 16px 12px;
                background: rgba(0, 0, 0, 0.98);
                backdrop-filter: blur(25px);
                border-top: 2px solid rgba(29, 185, 84, 0.3);
                box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.5);
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .player-left {
                flex: none;
                display: flex;
                align-items: center;
                gap: 12px;
                width: 100%;
                min-width: 0;
            }

            .player-cover {
                width: 48px;
                height: 48px;
                border-radius: 8px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
                flex-shrink: 0;
            }

            .player-cover i {
                font-size: 20px;
            }

            .player-info {
                flex: 1;
                min-width: 0;
                margin: 0;
            }

            .player-title {
                font-size: 14px;
                font-weight: 700;
                margin-bottom: 2px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .player-artist {
                font-size: 12px;
                color: #b3b3b3;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .player-center {
                flex: none;
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .player-controls {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 16px;
                width: 100%;
            }

            .control-btn {
                font-size: 16px;
                padding: 8px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
                width: 36px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .control-btn:hover {
                background: rgba(29, 185, 84, 0.2);
                transform: scale(1.05);
            }

            .play-pause-btn {
                width: 44px;
                height: 44px;
                font-size: 16px;
                box-shadow: 0 4px 16px rgba(255, 255, 255, 0.2);
            }

            .progress-container {
                display: flex;
                align-items: center;
                gap: 8px;
                width: 100%;
            }

            .progress-time {
                font-size: 10px;
                min-width: 32px;
                font-weight: 600;
                text-align: center;
                color: #b3b3b3;
            }

            .progress-bar {
                flex: 1;
                height: 6px;
                border-radius: 3px;
                background: rgba(255, 255, 255, 0.2);
                box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
                cursor: pointer;
            }

            .progress-fill {
                border-radius: 3px;
                box-shadow: 0 0 8px rgba(29, 185, 84, 0.5);
            }

            .player-right {
                flex: none;
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 16px;
                width: 100%;
            }

            .lyrics-toggle-btn {
                font-size: 16px;
                padding: 8px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                transition: all 0.3s ease;
                width: 36px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .lyrics-toggle-btn:hover,
            .lyrics-toggle-btn.active {
                background: rgba(29, 185, 84, 0.2);
                transform: scale(1.05);
            }

            .volume-container {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .volume-btn {
                font-size: 16px;
                padding: 8px;
                width: 36px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .volume-bar {
                width: 60px;
                height: 6px;
                border-radius: 3px;
                background: rgba(255, 255, 255, 0.2);
                cursor: pointer;
            }

            .volume-fill {
                border-radius: 3px;
            }

            .management-panel {
                width: 100%;
                right: -100%;
            }

            .panel-content {
                padding: 20px;
            }

            .form-input,
            .form-select,
            .form-textarea {
                padding: 16px;
                font-size: 16px;
                border-radius: 12px;
            }

            .add-music-btn {
                padding: 18px;
                font-size: 18px;
                border-radius: 30px;
            }

            .icon-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 12px;
            }

            .icon-option {
                padding: 16px;
                font-size: 24px;
                border-radius: 12px;
            }

            .theme-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }

            .theme-option {
                border-radius: 12px;
                min-height: 80px;
            }

            .empty-state {
                padding: 40px 20px;
            }

            .empty-state i {
                font-size: 48px;
            }

            .empty-state h3 {
                font-size: 20px;
            }

            .modal {
                margin: 20px;
                padding: 24px;
                border-radius: 20px;
            }

            .password-input {
                padding: 16px;
                font-size: 16px;
                border-radius: 12px;
            }

            .modal-btn {
                padding: 16px 24px;
                font-size: 16px;
                border-radius: 30px;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 70px 8px 140px;
            }

            .music-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .music-card {
                padding: 10px;
            }

            .music-card-cover i {
                font-size: 24px;
            }

            .play-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
                bottom: 8px;
                right: 8px;
            }

            .favorite-button {
                width: 32px;
                height: 32px;
                top: 8px;
                right: 8px;
                font-size: 14px;
            }

            .welcome-title {
                font-size: 24px;
            }

            .player {
                height: 110px;
                padding: 12px;
            }

            .player-controls {
                gap: 16px;
            }

            .control-btn {
                font-size: 16px;
                padding: 8px;
            }

            .play-pause-btn {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }
        }

        @media (max-width: 360px) {
            .music-grid {
                grid-template-columns: 1fr 1fr;
                gap: 6px;
            }

            .music-card {
                padding: 8px;
            }

            .welcome-title {
                font-size: 22px;
            }

            .search-input {
                padding: 14px 18px 14px 48px;
                font-size: 15px;
            }
        }
    </style>
    <style>
        @view-transition {
            navigation: auto;
        }
    </style>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>

<body class="theme-sweater"><!-- Particles Container -->
    <div class="particles" id="particles"></div><!-- Mobile Menu Toggle --> <button class="mobile-menu-toggle"
        id="mobileMenuToggle"> <i class="fas fa-bars"></i> </button> <!-- App Container -->
    <div class="app-container"><!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="logo"><i class="fas fa-headphones"></i> <span>MusicPlay</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <div class="nav-link active" data-tab="home"><i class="fas fa-home"></i> <span>Incio</span>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-link" data-tab="search"><i class="fas fa-search"></i> <span>Buscar</span>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-link" data-tab="favorites"><i class="fas fa-heart"></i> <span>Favoritos</span>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-link" id="configLink"><i class="fas fa-cog"></i> <span>Configuraes</span>
                    </div>
                </li>
            </ul>
        </nav><!-- Main Content -->
        <main class="main-content"><!-- Header -->
            <header class="header">
                <h1 class="welcome-title" id="welcomeTitle">Bem-vindo de volta</h1>
                <div class="search-container"><i class="fas fa-search search-icon"></i> <input type="text"
                        class="search-input" id="searchInput" placeholder="O que voc quer ouvir?">
                </div>
            </header><!-- Home Tab -->
            <div class="tab-content active" id="homeTab">
                <div class="music-grid" id="musicGrid"><!-- Music cards will be populated here -->
                </div>
                <div class="empty-state" id="emptyState" style="display: none;"><i class="fas fa-music"></i>
                    <h3>Nenhuma msica encontrada</h3>
                    <p>Adicione suas primeiras msicas nas configuraes</p>
                </div>
            </div><!-- Search Tab -->
            <div class="tab-content" id="searchTab">
                <div class="music-grid" id="searchGrid"><!-- Search results will be populated here -->
                </div>
                <div class="empty-state" id="searchEmptyState" style="display: none;"><i class="fas fa-search"></i>
                    <h3>Nenhum resultado encontrado</h3>
                    <p>Tente buscar por outro termo</p>
                </div>
            </div><!-- Favorites Tab -->
            <div class="tab-content" id="favoritesTab">
                <div class="music-grid" id="favoritesGrid"><!-- Favorite music cards will be populated here -->
                </div>
                <div class="empty-state" id="favoritesEmptyState" style="display: none;"><i class="fas fa-heart"></i>
                    <h3>Nenhum favorito ainda</h3>
                    <p>Marque suas msicas favoritas com o corao</p>
                </div>
            </div>
        </main><!-- Lyrics Sidebar -->
        <div class="lyrics-sidebar" id="lyricsSidebar">
            <div class="lyrics-header">
                <h3 class="lyrics-title">Textos Romnticos</h3><button class="close-lyrics-btn" id="closeLyricsBtn"> <i
                        class="fas fa-times"></i> </button>
            </div>
            <div class="lyrics-content" id="lyricsContent">
                <div class="lyric-line">
                    Selecione uma msica para ver os textos romnticos
                </div>
            </div>
        </div>
    </div><!-- Player -->
    <div class="player">
        <div class="player-left">
            <div class="player-cover" id="playerCover"><i class="fas fa-music"></i>
            </div>
            <div class="player-info">
                <div class="player-title" id="playerTitle">
                    Selecione uma msica
                </div>
                <div class="player-artist" id="playerArtist">
                    Artista
                </div>
            </div>
        </div>
        <div class="player-center">
            <div class="player-controls"><button class="control-btn" id="shuffleBtn"> <i class="fas fa-random"></i>
                </button> <button class="control-btn" id="prevBtn"> <i class="fas fa-step-backward"></i> </button>
                <button class="play-pause-btn" id="playPauseBtn"> <i class="fas fa-play"></i> </button> <button
                    class="control-btn" id="nextBtn"> <i class="fas fa-step-forward"></i> </button> <button
                    class="control-btn" id="repeatBtn"> <i class="fas fa-redo"></i> </button>
            </div>
            <div class="progress-container"><span class="progress-time" id="currentTime">0:00</span>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div><span class="progress-time" id="totalTime">0:00</span>
            </div>
        </div>
        <div class="player-right"><button class="lyrics-toggle-btn" id="lyricsToggleBtn"> <i
                    class="fas fa-quote-right"></i> </button>
            <div class="volume-container"><button class="volume-btn" id="volumeBtn"> <i class="fas fa-volume-up"></i>
                </button>
                <div class="volume-bar" id="volumeBar">
                    <div class="volume-fill" id="volumeFill"></div>
                </div>
            </div>
        </div>
    </div><!-- Password Modal -->
    <div class="modal-overlay" id="passwordModal">
        <div class="modal">
            <div class="modal-icon"><i class="fas fa-lock"></i>
            </div>
            <h2 class="modal-title">Acesso s Configuraes</h2>
            <p class="modal-subtitle">Digite a senha para acessar as configuraes</p><input type="password"
                class="password-input" id="passwordInput" placeholder="Digite a senha">
            <div class="modal-buttons"><button class="modal-btn secondary" id="cancelBtn">Cancelar</button> <button
                    class="modal-btn primary" id="enterBtn">Entrar</button>
            </div>
        </div>
    </div><!-- Management Panel -->
    <div class="management-panel" id="managementPanel">
        <div class="panel-header">
            <h2 class="panel-title">Configuraes</h2><button class="close-panel-btn" id="closePanelBtn"> <i
                    class="fas fa-times"></i> </button>
        </div>
        <div class="panel-content"><!-- File Upload Area -->
            <div class="file-upload-area" id="fileUploadArea"><i class="fas fa-cloud-upload-alt"></i>
                <h3>Adicione suas msicas MP3</h3>
                <p>Arraste arquivos aqui ou clique para selecionar do seu dispositivo</p>
                <p style="font-size: 12px; color: #b3b3b3; margin-top: 8px;">Suporta: MP3, WAV, M4A e outros formatos de
                    udio</p><input type="file" class="file-input" id="fileInput"
                    accept="audio/*,.mp3,.wav,.m4a,.aac,.ogg" multiple>
            </div><!-- Add Music Form -->
            <form id="addMusicForm">
                <div class="form-group"><label class="form-label">URL da Msica</label> <input type="url"
                        class="form-input" id="musicUrl" placeholder="Cole o link do YouTube ou URL do MP3">
                </div>
                <div class="form-group"><label class="form-label">Nome da Msica</label> <input type="text"
                        class="form-input" id="musicTitle" placeholder="Digite o nome da msica" required>
                </div>
                <div class="form-group"><label class="form-label">Nome do Artista</label> <input type="text"
                        class="form-input" id="musicArtist" placeholder="Digite o nome do artista" required>
                </div>
                <div class="form-group"><label class="form-label">cone</label>
                    <div class="icon-grid" id="iconGrid">
                        <div class="icon-option selected" data-icon="fas fa-music"><i class="fas fa-music"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-guitar"><i class="fas fa-guitar"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-drum"><i class="fas fa-drum"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-microphone"><i class="fas fa-microphone"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-headphones"><i class="fas fa-headphones"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-compact-disc"><i class="fas fa-compact-disc"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-record-vinyl"><i class="fas fa-record-vinyl"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-heart"><i class="fas fa-heart"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-star"><i class="fas fa-star"></i>
                        </div>
                        <div class="icon-option" data-icon="fas fa-fire"><i class="fas fa-fire"></i>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Tema de Fundo</label>
                    <div class="theme-grid" id="themeGrid">
                        <div class="theme-option selected sweater" data-theme="sweater"></div>
                        <div class="theme-option sunset" data-theme="sunset"></div>
                        <div class="theme-option forest" data-theme="forest"></div>
                        <div class="theme-option purple" data-theme="purple"></div>
                        <div class="theme-option ocean" data-theme="ocean"></div>
                        <div class="theme-option gold" data-theme="gold"></div>
                        <div class="theme-option platinum" data-theme="platinum"></div>
                        <div class="theme-option charcoal" data-theme="charcoal"></div>
                        <div class="theme-option rose" data-theme="rose"></div>
                        <div class="theme-option emerald" data-theme="emerald"></div>
                        <div class="theme-option sapphire" data-theme="sapphire"></div>
                        <div class="theme-option copper" data-theme="copper"></div>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">Textos Romnticos (um por linha)</label> <textarea
                        class="form-textarea" id="musicLyrics" placeholder="Digite seus textos romnticos aqui...
Um texto por linha"></textarea>
                </div><button type="submit" class="add-music-btn" id="addMusicBtn"> <span class="btn-text">Adicionar
                        Msica</span> </button>
            </form><!-- Music List -->
            <div class="music-list">
                <h3 style="margin-bottom: 16px; color: #ffffff;">Msicas Adicionadas</h3>
                <div id="musicList"><!-- Added music items will appear here -->
                </div>
            </div>
        </div>
    </div><!-- Toast Notification -->
    <div class="toast" id="toast"></div><!-- Hidden Audio Element -->
    <audio id="audioPlayer" preload="metadata"></audio><!-- YouTube Player (Hidden) -->
    <div id="youtubePlayer"
        style="position: fixed; top: -100px; left: -100px; width: 1px; height: 1px; pointer-events: none;"></div>
    <script>
        // Configuration
        const defaultConfig = {
            welcome_title: "Bem-vindo ao DengoPlay",
            search_placeholder: "Busque sua msica romntica..."
        };

        // Global Variables
        let currentSong = null;
        let isPlaying = false;
        let currentPlaylist = [];
        let currentIndex = 0;
        let isShuffled = false;
        let isRepeating = false;
        let currentVolume = 1;
        let isMuted = false;
        let allMusic = [];
        let filteredMusic = [];
        let favoriteMusic = [];
        let searchResults = [];
        let currentTab = 'home';
        let searchQuery = '';
        let currentLyrics = [];
        let lyricsInterval = null;
        let youtubePlayer = null;
        let isYouTubeReady = false;
        let currentAudioType = 'html5';
        let uploadedFiles = new Map();
        let isLoading = false;

        // Firebase Integration
        let firebaseInitialized = false;
        let musicRef = null;

        function initializeFirebase() {
            if (window.firebaseConnected && window.firebaseDB) {
                try {
                    musicRef = window.firebaseRef(window.firebaseDB, 'music');

                    // Listen to Firebase changes
                    window.firebaseOnValue(musicRef, (snapshot) => {
                        const data = snapshot.val();
                        const musicArray = data ? Object.keys(data).map(key => ({
                            __backendId: key,
                            ...data[key]
                        })) : [];

                        allMusic = musicArray;
                        updateAllGrids();
                        updateMusicList();
                    }, (error) => {
                        console.error('Firebase error:', error);
                        showToast('Erro de conexo com Firebase', 'error');
                    });

                    firebaseInitialized = true;
                    showToast('Firebase conectado com sucesso!');
                } catch (error) {
                    console.error('Firebase initialization error:', error);
                    showToast('Erro ao conectar com Firebase', 'error');
                }
            } else {
                showToast('Firebase no disponvel', 'error');
            }
        }

        // Data SDK Handler (not used, Firebase only)
        const dataHandler = {
            onDataChanged(data) {
                // Firebase handles all data, this is just for SDK compatibility
            }
        };

        // DOM Elements
        const audioPlayer = document.getElementById('audioPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const shuffleBtn = document.getElementById('shuffleBtn');
        const repeatBtn = document.getElementById('repeatBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const totalTimeEl = document.getElementById('totalTime');
        const volumeBtn = document.getElementById('volumeBtn');
        const volumeBar = document.getElementById('volumeBar');
        const volumeFill = document.getElementById('volumeFill');
        const playerTitle = document.getElementById('playerTitle');
        const playerArtist = document.getElementById('playerArtist');
        const playerCover = document.getElementById('playerCover');
        const musicGrid = document.getElementById('musicGrid');
        const searchGrid = document.getElementById('searchGrid');
        const favoritesGrid = document.getElementById('favoritesGrid');
        const emptyState = document.getElementById('emptyState');
        const searchEmptyState = document.getElementById('searchEmptyState');
        const favoritesEmptyState = document.getElementById('favoritesEmptyState');
        const searchInput = document.getElementById('searchInput');
        const lyricsSidebar = document.getElementById('lyricsSidebar');
        const lyricsContent = document.getElementById('lyricsContent');
        const lyricsToggleBtn = document.getElementById('lyricsToggleBtn');
        const passwordModal = document.getElementById('passwordModal');
        const passwordInput = document.getElementById('passwordInput');
        const managementPanel = document.getElementById('managementPanel');
        const addMusicForm = document.getElementById('addMusicForm');
        const addMusicBtn = document.getElementById('addMusicBtn');
        const musicList = document.getElementById('musicList');
        const toast = document.getElementById('toast');
        const sidebar = document.getElementById('sidebar');
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const fileUploadArea = document.getElementById('fileUploadArea');
        const fileInput = document.getElementById('fileInput');

        // Initialize YouTube API
        function loadYouTubeAPI() {
            const tag = document.createElement('script');
            tag.src = 'https://www.youtube.com/iframe_api';
            const firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }

        // YouTube API Ready Callback
        window.onYouTubeIframeAPIReady = function () {
            youtubePlayer = new YT.Player('youtubePlayer', {
                height: '1',
                width: '1',
                playerVars: {
                    'playsinline': 1,
                    'controls': 0,
                    'disablekb': 1,
                    'fs': 0,
                    'modestbranding': 1,
                    'rel': 0
                },
                events: {
                    'onReady': function () {
                        isYouTubeReady = true;
                    },
                    'onStateChange': onYouTubePlayerStateChange
                }
            });
        };

        function onYouTubePlayerStateChange(event) {
            if (event.data === YT.PlayerState.PLAYING) {
                isPlaying = true;
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                startLyrics();
            } else if (event.data === YT.PlayerState.PAUSED) {
                isPlaying = false;
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                stopLyrics();
            } else if (event.data === YT.PlayerState.ENDED) {
                nextSong();
            }
        }

        // Utility Functions
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function showToast(message, type = 'success') {
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function extractYouTubeId(url) {
            try {
                // Shorts
                if (url.includes("shorts/")) {
                    return url.split("shorts/")[1].split("?")[0].substring(0, 11);
                }

                // youtu.be
                if (url.includes("youtu.be/")) {
                    return url.split("youtu.be/")[1].split("?")[0].substring(0, 11);
                }

                // watch?v=
                if (url.includes("v=")) {
                    return url.split("v=")[1].split("&")[0].substring(0, 11);
                }

                return null;
            } catch {
                return null;
            }
        }


        async function getYouTubeMetadata(videoId) {
            try {
                const response = await fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`);
                const data = await response.json();
                return {
                    title: data.title || 'Ttulo no encontrado',
                    artist: data.author_name || 'Artista no encontrado'
                };
            } catch (error) {
                return {
                    title: 'Ttulo no encontrado',
                    artist: 'Artista no encontrado'
                };
            }
        }

        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // Theme Management
        function changeTheme(themeName) {
            document.body.className = `theme-${themeName}`;
            createParticles();
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            particlesContainer.innerHTML = '';

            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    createParticle();
                }, i * 100);
            }

            setInterval(createParticle, 800);
        }

        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 2 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 10) + 's';

            document.getElementById('particles').appendChild(particle);

            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 20000);
        }

        // Tab Management
        function switchTab(tabName) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}Tab`).classList.add('active');

            currentTab = tabName;
            updateCurrentGrid();
        }

        function updateCurrentGrid() {
            switch (currentTab) {
                case 'home':
                    filteredMusic = allMusic;
                    renderMusicGrid(musicGrid, filteredMusic, emptyState);
                    break;
                case 'search':
                    performSearch();
                    break;
                case 'favorites':
                    favoriteMusic = allMusic.filter(music => music.isFavorite);
                    renderMusicGrid(favoritesGrid, favoriteMusic, favoritesEmptyState);
                    break;
            }
        }

        function updateAllGrids() {
            // Update home grid
            filteredMusic = allMusic;
            renderMusicGrid(musicGrid, filteredMusic, emptyState);

            // Update favorites grid
            favoriteMusic = allMusic.filter(music => music.isFavorite);
            renderMusicGrid(favoritesGrid, favoriteMusic, favoritesEmptyState);

            // Update search if there's a query
            if (searchQuery) {
                performSearch();
            }
        }

        function performSearch() {
            if (!searchQuery) {
                searchResults = [];
            } else {
                searchResults = allMusic.filter(music =>
                    music.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    music.artist.toLowerCase().includes(searchQuery.toLowerCase())
                );
            }
            renderMusicGrid(searchGrid, searchResults, searchEmptyState);
        }

        // Music Management - Firebase Only
        async function addMusic(musicData) {
            if (isLoading) return;

            if (!firebaseInitialized || !musicRef) {
                showToast('Firebase no conectado', 'error');
                return;
            }

            setLoading(true);

            try {
                const music = {
                    id: generateId(),
                    ...musicData,
                    isFavorite: false,
                    createdAt: new Date().toISOString()
                };

                const newMusicRef = window.firebasePush(musicRef);
                await window.firebaseSet(newMusicRef, music);
                showToast('Msica adicionada ao Firebase!');
            } catch (error) {
                showToast('Erro ao adicionar msica no Firebase', 'error');
                console.error('Firebase add music error:', error);
            } finally {
                setLoading(false);
            }
        }

        async function removeMusic(id) {
            if (isLoading) return;

            if (!firebaseInitialized || !musicRef) {
                showToast('Firebase no conectado', 'error');
                return;
            }

            setLoading(true);

            try {
                const music = allMusic.find(m => m.id === id || m.__backendId === id);
                if (!music) return;

                // Clean up blob URL if it exists
                if (music.url && music.url.startsWith('blob:')) {
                    URL.revokeObjectURL(music.url);
                    uploadedFiles.delete(music.id);
                }

                const musicToDeleteRef = window.firebaseRef(window.firebaseDB, `music/${music.__backendId || music.id}`);
                await window.firebaseRemove(musicToDeleteRef);
                showToast('Msica removida do Firebase!');
            } catch (error) {
                showToast('Erro ao remover msica do Firebase', 'error');
                console.error('Firebase remove music error:', error);
            } finally {
                setLoading(false);
            }
        }

        async function toggleFavorite(id) {
            if (isLoading) return;

            if (!firebaseInitialized || !musicRef) {
                showToast('Firebase no conectado', 'error');
                return;
            }

            try {
                const music = allMusic.find(m => m.id === id || m.__backendId === id);
                if (!music) return;

                const updatedMusic = { ...music, isFavorite: !music.isFavorite };

                const musicToUpdateRef = window.firebaseRef(window.firebaseDB, `music/${music.__backendId || music.id}`);
                await window.firebaseSet(musicToUpdateRef, updatedMusic);

                const action = updatedMusic.isFavorite ? 'adicionada aos' : 'removida dos';
                showToast(`Msica ${action} favoritos no Firebase!`);
            } catch (error) {
                showToast('Erro ao atualizar favorito no Firebase', 'error');
                console.error('Firebase toggle favorite error:', error);
            }
        }

        function setLoading(loading) {
            isLoading = loading;
            const btnText = addMusicBtn.querySelector('.btn-text');

            if (loading) {
                btnText.innerHTML = '<span class="loading-spinner"></span> Adicionando...';
                addMusicBtn.disabled = true;
            } else {
                btnText.textContent = 'Adicionar Msica';
                addMusicBtn.disabled = false;
            }
        }

        function updateMusicList() {
            musicList.innerHTML = '';
            allMusic.forEach(music => {
                const item = document.createElement('div');
                item.className = 'music-item';
                const musicId = music.__backendId || music.id;
                item.innerHTML = `
                    <div class="music-item-icon">
                        <i class="${music.icon}"></i>
                    </div>
                    <div class="music-item-info">
                        <div class="music-item-title">${music.title}</div>
                        <div class="music-item-artist">${music.artist}</div>
                    </div>
                    <button class="delete-btn" onclick="removeMusic('${musicId}')">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                musicList.appendChild(item);
            });
        }

        function renderMusicGrid(container, musicArray, emptyStateEl) {
            container.innerHTML = '';

            if (musicArray.length === 0) {
                emptyStateEl.style.display = 'block';
                return;
            }

            emptyStateEl.style.display = 'none';

            musicArray.forEach(music => {
                const card = document.createElement('div');
                card.className = `music-card ${music.isFavorite ? 'favorite' : ''}`;
                const musicId = music.__backendId || music.id;
                card.innerHTML = `
                    <div class="music-card-cover">
                        <i class="${music.icon}"></i>
                        <button class="play-button" onclick="playMusic('${musicId}')">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="favorite-button ${music.isFavorite ? 'active' : ''}" onclick="toggleFavorite('${musicId}')">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="music-card-title">${music.title}</div>
                    <div class="music-card-artist">${music.artist}</div>
                `;
                container.appendChild(card);
            });
        }

        // Audio Player Functions
        function playMusic(id) {
            const music = allMusic.find(m => m.id === id || m.__backendId === id);
            if (!music) return;

            currentSong = music;

            // Set current playlist based on active tab
            switch (currentTab) {
                case 'home':
                    currentPlaylist = filteredMusic;
                    break;
                case 'search':
                    currentPlaylist = searchResults;
                    break;
                case 'favorites':
                    currentPlaylist = favoriteMusic;
                    break;
                default:
                    currentPlaylist = allMusic;
            }

            currentIndex = currentPlaylist.findIndex(m => m.id === id);

            // Change theme
            changeTheme(music.theme);

            // Update player info
            playerTitle.textContent = music.title;
            playerArtist.textContent = music.artist;
            playerCover.innerHTML = `<i class="${music.icon}"></i>`;

            // Parse lyrics
            currentLyrics = parseLyrics(music.lyrics || '');
            updateLyricsDisplay();

            // Auto-open lyrics
            lyricsSidebar.classList.add('show');
            lyricsToggleBtn.classList.add('active');

            // Play audio
            if (extractYouTubeId(music.url)) {
                playYouTubeAudio(music.url);
            } else {
                playHTML5Audio(music.url);
            }
        }

        function playHTML5Audio(url) {
            currentAudioType = 'html5';
            audioPlayer.src = url;
            audioPlayer.load();
            audioPlayer.play().then(() => {
                isPlaying = true;
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                startLyrics();
            }).catch(error => {
                console.error('Error playing audio:', error);
                showToast('Erro ao reproduzir udio', 'error');
            });
        }

        function playYouTubeAudio(url) {
            if (!isYouTubeReady) {
                showToast('Player do YouTube ainda no est pronto', 'error');
                return;
            }

            const videoId = extractYouTubeId(url);
            if (!videoId) {
                showToast('URL do YouTube invlida', 'error');
                return;
            }

            currentAudioType = 'youtube';
            audioPlayer.pause();
            youtubePlayer.loadVideoById(videoId);
            youtubePlayer.playVideo();
        }

        function togglePlayPause() {
            if (currentAudioType === 'html5') {
                if (isPlaying) {
                    audioPlayer.pause();
                } else {
                    audioPlayer.play();
                }
            } else if (currentAudioType === 'youtube' && isYouTubeReady) {
                if (isPlaying) {
                    youtubePlayer.pauseVideo();
                } else {
                    youtubePlayer.playVideo();
                }
            }
        }

        function nextSong() {
            if (currentPlaylist.length === 0) return;

            if (isRepeating && currentSong) {
                playMusic(currentSong.id);
                return;
            }

            let nextIndex;
            if (isShuffled) {
                nextIndex = Math.floor(Math.random() * currentPlaylist.length);
            } else {
                nextIndex = (currentIndex + 1) % currentPlaylist.length;
            }

            playMusic(currentPlaylist[nextIndex].id);
        }

        function prevSong() {
            if (currentPlaylist.length === 0) return;

            let prevIndex;
            if (isShuffled) {
                prevIndex = Math.floor(Math.random() * currentPlaylist.length);
            } else {
                prevIndex = currentIndex === 0 ? currentPlaylist.length - 1 : currentIndex - 1;
            }

            playMusic(currentPlaylist[prevIndex].id);
        }

        function toggleShuffle() {
            isShuffled = !isShuffled;
            shuffleBtn.classList.toggle('active', isShuffled);
        }

        function toggleRepeat() {
            isRepeating = !isRepeating;
            repeatBtn.classList.toggle('active', isRepeating);
        }

        function setVolume(volume) {
            currentVolume = volume;
            audioPlayer.volume = volume;

            if (isYouTubeReady && youtubePlayer.setVolume) {
                youtubePlayer.setVolume(volume * 100);
            }

            volumeFill.style.width = (volume * 100) + '%';

            const volumeIcon = volumeBtn.querySelector('i');
            if (volume === 0) {
                volumeIcon.className = 'fas fa-volume-mute';
            } else if (volume < 0.5) {
                volumeIcon.className = 'fas fa-volume-down';
            } else {
                volumeIcon.className = 'fas fa-volume-up';
            }
        }

        function toggleMute() {
            if (isMuted) {
                setVolume(currentVolume);
                isMuted = false;
            } else {
                setVolume(0);
                isMuted = true;
            }
        }

        // Lyrics Functions
        function parseLyrics(lyricsText) {
            if (!lyricsText) return [];

            const lines = lyricsText.split('\n').filter(line => line.trim());
            return lines.map(line => line.trim());
        }

        function updateLyricsDisplay() {
            lyricsContent.innerHTML = '';

            if (currentLyrics.length === 0) {
                lyricsContent.innerHTML = '<div class="lyric-line">Nenhum texto romntico disponvel</div>';
                return;
            }

            currentLyrics.forEach((lyric, index) => {
                const line = document.createElement('div');
                line.className = 'lyric-line';
                line.textContent = lyric;
                line.dataset.index = index;
                lyricsContent.appendChild(line);
            });
        }

        let currentLyricIndex = -1;
        let lyricStartTime = 0;

        function startLyrics() {
            if (currentLyrics.length === 0) return;

            stopLyrics();
            currentLyricIndex = -1;
            lyricStartTime = Date.now();

            // Update lyrics with higher frequency for ultra-smooth transitions
            lyricsInterval = setInterval(updateCurrentLyric, 50);
            // Initial update
            updateCurrentLyric();
        }

        function stopLyrics() {
            if (lyricsInterval) {
                clearInterval(lyricsInterval);
                lyricsInterval = null;
            }

            currentLyricIndex = -1;

            // Reset all lyrics to hidden state with smooth transition
            document.querySelectorAll('.lyric-line').forEach(line => {
                line.classList.remove('current', 'passed', 'next');
            });
        }

        function updateCurrentLyric() {
            let currentTime;
            let totalDuration;

            if (currentAudioType === 'html5') {
                currentTime = audioPlayer.currentTime;
                totalDuration = audioPlayer.duration;
            } else if (currentAudioType === 'youtube' && isYouTubeReady) {
                currentTime = youtubePlayer.getCurrentTime();
                totalDuration = youtubePlayer.getDuration();
            } else {
                return;
            }

            if (!totalDuration || currentLyrics.length === 0 || totalDuration < 1) return;

            // More precise calculation with buffer time for smoother transitions
            const timePerLyric = totalDuration / currentLyrics.length;
            const newLyricIndex = Math.floor(currentTime / timePerLyric);

            // Only update if the lyric index actually changed
            if (newLyricIndex !== currentLyricIndex && newLyricIndex >= 0 && newLyricIndex < currentLyrics.length) {
                currentLyricIndex = newLyricIndex;

                // Batch DOM updates for better performance
                requestAnimationFrame(() => {
                    const lines = document.querySelectorAll('.lyric-line');

                    lines.forEach((line, index) => {
                        // Remove all classes first
                        line.classList.remove('current', 'passed', 'next');

                        if (index === currentLyricIndex) {
                            line.classList.add('current');
                            // Smooth scroll to current lyric
                            line.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center',
                                inline: 'nearest'
                            });
                        } else if (index < currentLyricIndex) {
                            line.classList.add('passed');
                        } else if (index === currentLyricIndex + 1) {
                            line.classList.add('next');
                        }
                    });
                });
            }
        }

        function toggleLyrics() {
            const isVisible = lyricsSidebar.classList.contains('show');

            if (isVisible) {
                lyricsSidebar.classList.remove('show');
                lyricsToggleBtn.classList.remove('active');
            } else {
                lyricsSidebar.classList.add('show');
                lyricsToggleBtn.classList.add('active');
            }
        }

        // File Upload Functions
        function handleFileUpload(files) {
            Array.from(files).forEach(async (file) => {
                // Accept various audio formats
                if (file.type.startsWith('audio/') || file.name.toLowerCase().endsWith('.mp3')) {
                    const id = generateId();
                    const url = URL.createObjectURL(file);

                    uploadedFiles.set(id, url);

                    // Get audio duration
                    let duration = 0;
                    try {
                        const audio = new Audio(url);
                        await new Promise((resolve) => {
                            audio.addEventListener('loadedmetadata', () => {
                                duration = audio.duration || 0;
                                resolve();
                            });
                            audio.addEventListener('error', resolve);
                        });
                    } catch (error) {
                        console.warn('Could not get audio duration:', error);
                    }

                    const fileName = file.name.replace(/\.[^/.]+$/, "");

                    // Fill the form instead of adding directly
                    document.getElementById('musicUrl').value = url;
                    document.getElementById('musicTitle').value = fileName;
                    document.getElementById('musicArtist').value = 'Msica Local';
                    document.getElementById('musicLyrics').value = '';

                    // Store the file data for later use
                    document.getElementById('musicUrl').dataset.fileId = id;
                    document.getElementById('musicUrl').dataset.duration = Math.round(duration);

                    showToast(`"${fileName}" carregado! Personalize e clique em "Adicionar Msica"`);
                } else {
                    showToast(`"${file.name}" no  um arquivo de udio vlido`, 'error');
                }
            });
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', async function () {
            // Initialize Firebase only
            setTimeout(() => {
                initializeFirebase();
            }, 1000);

            // Initialize
            loadYouTubeAPI();
            createParticles();

            // Player controls
            playPauseBtn.addEventListener('click', togglePlayPause);
            nextBtn.addEventListener('click', nextSong);
            prevBtn.addEventListener('click', prevSong);
            shuffleBtn.addEventListener('click', toggleShuffle);
            repeatBtn.addEventListener('click', toggleRepeat);
            volumeBtn.addEventListener('click', toggleMute);
            lyricsToggleBtn.addEventListener('click', toggleLyrics);

            // Progress bar
            progressBar.addEventListener('click', (e) => {
                const rect = progressBar.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;

                if (currentAudioType === 'html5') {
                    audioPlayer.currentTime = percent * audioPlayer.duration;
                } else if (currentAudioType === 'youtube' && isYouTubeReady) {
                    const duration = youtubePlayer.getDuration();
                    youtubePlayer.seekTo(percent * duration);
                }
            });

            // Volume bar
            volumeBar.addEventListener('click', (e) => {
                const rect = volumeBar.getBoundingClientRect();
                const percent = (e.clientX - rect.left) / rect.width;
                setVolume(Math.max(0, Math.min(1, percent)));
            });

            // Audio events
            audioPlayer.addEventListener('play', () => {
                isPlaying = true;
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                startLyrics();
            });

            audioPlayer.addEventListener('pause', () => {
                isPlaying = false;
                playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                stopLyrics();
            });

            audioPlayer.addEventListener('ended', nextSong);

            audioPlayer.addEventListener('timeupdate', () => {
                if (currentAudioType === 'html5') {
                    const current = audioPlayer.currentTime;
                    const duration = audioPlayer.duration;

                    if (duration) {
                        progressFill.style.width = (current / duration * 100) + '%';
                        currentTimeEl.textContent = formatTime(current);
                        totalTimeEl.textContent = formatTime(duration);
                    }
                }
            });

            // YouTube progress update
            setInterval(() => {
                if (currentAudioType === 'youtube' && isYouTubeReady && isPlaying) {
                    const current = youtubePlayer.getCurrentTime();
                    const duration = youtubePlayer.getDuration();

                    if (duration) {
                        progressFill.style.width = (current / duration * 100) + '%';
                        currentTimeEl.textContent = formatTime(current);
                        totalTimeEl.textContent = formatTime(duration);
                    }
                }
            }, 1000);

            // Search
            searchInput.addEventListener('input', (e) => {
                searchQuery = e.target.value;
                if (currentTab === 'search') {
                    performSearch();
                }
            });

            // Tab navigation
            document.querySelectorAll('[data-tab]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabName = link.dataset.tab;
                    switchTab(tabName);
                });
            });

            // Mobile menu
            mobileMenuToggle.addEventListener('click', () => {
                sidebar.classList.toggle('show');
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', (e) => {
                if (window.innerWidth <= 768 &&
                    !sidebar.contains(e.target) &&
                    !mobileMenuToggle.contains(e.target)) {
                    sidebar.classList.remove('show');
                }
            });

            // Config link
            document.getElementById('configLink').addEventListener('click', (e) => {
                e.preventDefault();
                passwordModal.classList.add('show');
                passwordInput.focus();
            });

            // Password modal
            document.getElementById('cancelBtn').addEventListener('click', () => {
                passwordModal.classList.remove('show');
                passwordInput.value = '';
            });

            document.getElementById('enterBtn').addEventListener('click', () => {
                if (passwordInput.value === 'admin123') {
                    passwordModal.classList.remove('show');
                    managementPanel.classList.add('show');
                    passwordInput.value = '';
                } else {
                    passwordInput.classList.add('error');
                    setTimeout(() => passwordInput.classList.remove('error'), 500);
                    showToast('Senha incorreta', 'error');
                }
            });

            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    document.getElementById('enterBtn').click();
                }
            });

            // Close panels
            document.getElementById('closePanelBtn').addEventListener('click', () => {
                managementPanel.classList.remove('show');
            });

            document.getElementById('closeLyricsBtn').addEventListener('click', () => {
                lyricsSidebar.classList.remove('show');
                lyricsToggleBtn.classList.remove('active');
            });

            // Icon selection
            document.querySelectorAll('.icon-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.icon-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });

            // Theme selection
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });

            // File upload
            fileUploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUploadArea.classList.add('dragover');
            });

            fileUploadArea.addEventListener('dragleave', () => {
                fileUploadArea.classList.remove('dragover');
            });

            fileUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                fileUploadArea.classList.remove('dragover');
                handleFileUpload(e.dataTransfer.files);
            });

            fileInput.addEventListener('change', (e) => {
                handleFileUpload(e.target.files);
                e.target.value = '';
            });

            // Add music form
            addMusicForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const urlInput = document.getElementById('musicUrl');
                const url = urlInput.value;
                const title = document.getElementById('musicTitle').value;
                const artist = document.getElementById('musicArtist').value;
                const lyrics = document.getElementById('musicLyrics').value;

                const selectedIcon = document.querySelector('.icon-option.selected').dataset.icon;
                const selectedTheme = document.querySelector('.theme-option.selected').dataset.theme;

                // Check if it's a file upload
                const fileId = urlInput.dataset.fileId;
                const fileDuration = urlInput.dataset.duration || 0;

                const musicData = {
                    url,
                    title,
                    artist,
                    icon: selectedIcon,
                    theme: selectedTheme,
                    lyrics,
                    duration: parseInt(fileDuration) || 0
                };

                // If it's a file upload, add the file ID
                if (fileId) {
                    musicData.id = fileId;
                }

                await addMusic(musicData);
                addMusicForm.reset();

                // Clear file data
                urlInput.removeAttribute('data-file-id');
                urlInput.removeAttribute('data-duration');

                // Reset selections
                document.querySelectorAll('.icon-option').forEach(o => o.classList.remove('selected'));
                document.querySelector('.icon-option[data-icon="fas fa-music"]').classList.add('selected');
                document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('selected'));
                document.querySelector('.theme-option.sweater').classList.add('selected');
            });

            // Auto-fill YouTube metadata
            document.getElementById('musicUrl').addEventListener('blur', async (e) => {
                const url = e.target.value;
                const youtubeId = extractYouTubeId(url);

                if (youtubeId) {
                    const titleInput = document.getElementById('musicTitle');
                    const artistInput = document.getElementById('musicArtist');

                    if (!titleInput.value || !artistInput.value) {
                        const metadata = await getYouTubeMetadata(youtubeId);
                        if (!titleInput.value) titleInput.value = metadata.title;
                        if (!artistInput.value) artistInput.value = metadata.artist;
                    }
                }
            });
        });

        // Element SDK Integration
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig: defaultConfig,
                onConfigChange: async (config) => {
                    const welcomeTitle = document.getElementById('welcomeTitle');
                    const searchInput = document.getElementById('searchInput');

                    welcomeTitle.textContent = config.welcome_title || defaultConfig.welcome_title;
                    searchInput.placeholder = config.search_placeholder || defaultConfig.search_placeholder;
                },
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["welcome_title", config.welcome_title || defaultConfig.welcome_title],
                    ["search_placeholder", config.search_placeholder || defaultConfig.search_placeholder]
                ])
            });
        }

        // Make functions globally available
        window.playMusic = playMusic;
        window.removeMusic = removeMusic;
        window.toggleFavorite = toggleFavorite;
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'99e77f2d63cbf17f',t:'MTc2MzEzMzY2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>
