<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MusicPlay - Player Profissional</title><!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"><!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #121212;
            color: #ffffff;
            overflow-x: hidden;
            height: 100%;
            box-sizing: border-box;
        }

        /* Temas Animados */
        .theme-sweater {
            background: linear-gradient(135deg, #050a15 0%, #0d1a2f 100%);
            position: relative;
        }

        .theme-sunset {
            background: linear-gradient(135deg, #1a0a0f 0%, #2f1520 100%);
            position: relative;
        }

        .theme-forest {
            background: linear-gradient(135deg, #0a150a 0%, #152f15 100%);
            position: relative;
        }

        .theme-purple {
            background: linear-gradient(135deg, #150a1a 0%, #2f1540 100%);
            position: relative;
        }

        .theme-ocean {
            background: linear-gradient(135deg, #0a1520 0%, #153040 100%);
            position: relative;
        }

        .theme-gold {
            background: linear-gradient(135deg, #1a1510 0%, #2f2515 100%);
            position: relative;
        }

        .theme-neon {
            background: linear-gradient(135deg, #0f0a1a 0%, #1a0f2f 100%);
            position: relative;
        }

        .theme-rose {
            background: linear-gradient(135deg, #1a0a15 0%, #2f152a 100%);
            position: relative;
        }

        .theme-mint {
            background: linear-gradient(135deg, #0a1a15 0%, #152f25 100%);
            position: relative;
        }

        .theme-cyber {
            background: linear-gradient(135deg, #0a1a1a 0%, #152f2f 100%);
            position: relative;
        }

        /* Partículas e Animações de Background */
        .theme-particles::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .theme-sweater::before {
            background: 
                radial-gradient(circle at 20% 30%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(147, 197, 253, 0.2) 0%, transparent 50%);
            animation: pulseBlue 8s ease-in-out infinite;
        }

        .theme-sunset::before {
            background: 
                radial-gradient(circle at 30% 40%, rgba(251, 146, 60, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(239, 68, 68, 0.2) 0%, transparent 50%);
            animation: pulseSunset 10s ease-in-out infinite;
        }

        .theme-forest::before {
            background: 
                radial-gradient(circle at 25% 35%, rgba(34, 197, 94, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 75% 65%, rgba(74, 222, 128, 0.2) 0%, transparent 50%);
            animation: pulseForest 9s ease-in-out infinite;
        }

        .theme-purple::before {
            background: 
                radial-gradient(circle at 35% 25%, rgba(168, 85, 247, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 65% 75%, rgba(196, 181, 253, 0.2) 0%, transparent 50%);
            animation: pulsePurple 11s ease-in-out infinite;
        }

        .theme-ocean::before {
            background: 
                radial-gradient(circle at 40% 30%, rgba(14, 165, 233, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 60% 70%, rgba(56, 189, 248, 0.2) 0%, transparent 50%);
            animation: pulseOcean 12s ease-in-out infinite;
        }

        .theme-gold::before {
            background: 
                radial-gradient(circle at 30% 50%, rgba(245, 158, 11, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 30%, rgba(251, 191, 36, 0.2) 0%, transparent 50%);
            animation: pulseGold 10s ease-in-out infinite;
        }

        .theme-neon::before {
            background: 
                radial-gradient(circle at 25% 25%, rgba(236, 72, 153, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.3) 0%, transparent 50%);
            animation: pulseNeon 7s ease-in-out infinite;
        }

        .theme-rose::before {
            background: 
                radial-gradient(circle at 30% 40%, rgba(244, 114, 182, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(251, 113, 133, 0.25) 0%, transparent 50%);
            animation: pulseRose 9s ease-in-out infinite;
        }

        .theme-mint::before {
            background: 
                radial-gradient(circle at 20% 30%, rgba(52, 211, 153, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(110, 231, 183, 0.25) 0%, transparent 50%);
            animation: pulseMint 8s ease-in-out infinite;
        }

        .theme-cyber::before {
            background: 
                radial-gradient(circle at 35% 25%, rgba(6, 182, 212, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 65% 75%, rgba(34, 197, 94, 0.3) 0%, transparent 50%);
            animation: pulseCyber 6s ease-in-out infinite;
        }

        /* Partículas flutuantes */
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 2;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            opacity: 0.5;
            animation: floatUp 20s linear infinite;
            will-change: transform;
        }

        .theme-sweater .particle { background: #60a5fa; box-shadow: 0 0 6px rgba(96, 165, 250, 0.3); }
        .theme-sunset .particle { background: #fb923c; box-shadow: 0 0 6px rgba(251, 146, 60, 0.3); }
        .theme-forest .particle { background: #4ade80; box-shadow: 0 0 6px rgba(74, 222, 128, 0.3); }
        .theme-purple .particle { background: #a855f7; box-shadow: 0 0 6px rgba(168, 85, 247, 0.3); }
        .theme-ocean .particle { background: #38bdf8; box-shadow: 0 0 6px rgba(56, 189, 248, 0.3); }
        .theme-gold .particle { background: #fbbf24; box-shadow: 0 0 6px rgba(251, 191, 36, 0.3); }
        .theme-neon .particle { background: #ec4899; box-shadow: 0 0 8px rgba(236, 72, 153, 0.4); }
        .theme-rose .particle { background: #f472b6; box-shadow: 0 0 6px rgba(244, 114, 182, 0.3); }
        .theme-mint .particle { background: #34d399; box-shadow: 0 0 6px rgba(52, 211, 153, 0.3); }
        .theme-cyber .particle { background: #06b6d4; box-shadow: 0 0 8px rgba(6, 182, 212, 0.4); }

        @keyframes floatUp {
            0% { 
                transform: translateY(calc(100vh + 20px)) translateX(0) scale(0); 
                opacity: 0; 
            }
            10% { 
                opacity: 0.4; 
                transform: translateY(90vh) translateX(0) scale(1); 
            }
            90% { 
                opacity: 0.4; 
                transform: translateY(10vh) translateX(var(--drift, 0px)) scale(1); 
            }
            100% { 
                transform: translateY(-20px) translateX(var(--drift, 0px)) scale(0); 
                opacity: 0; 
            }
        }

        @keyframes pulseBlue { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
        @keyframes pulseSunset { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }
        @keyframes pulseForest { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
        @keyframes pulsePurple { 0%, 100% { opacity: 0.9; } 50% { opacity: 1; } }
        @keyframes pulseOcean { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
        @keyframes pulseGold { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }
        @keyframes pulseNeon { 0%, 100% { opacity: 0.9; } 33% { opacity: 1; } 66% { opacity: 0.8; } }
        @keyframes pulseRose { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; } }
        @keyframes pulseMint { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }
        @keyframes pulseCyber { 0%, 100% { opacity: 1; } 25% { opacity: 0.8; } 75% { opacity: 0.9; } }

        /* Layout Principal - Sem Sobreposições */
        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
            z-index: 10;
        }

        /* Sidebar Esquerda - Posicionamento Limpo */
        .sidebar {
            width: 240px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(25px);
            border-right: 1px solid rgba(255, 255, 255, 0.15);
            padding: 20px 16px;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: calc(100vh - 90px); /* Espaço para player */
            z-index: 100;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.3);
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        /* Toggle da Sidebar - Canto Superior Esquerdo */
        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 44px;
            height: 44px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .sidebar-toggle:hover {
            background: rgba(29, 185, 84, 0.9);
            transform: scale(1.05);
            border-color: rgba(29, 185, 84, 0.5);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
            padding: 0 12px;
        }

        .logo i {
            font-size: 24px;
            color: #1DB954;
        }

        .logo span {
            font-size: 20px;
            font-weight: 700;
            color: #ffffff;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 8px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px;
            color: #b3b3b3;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-link i {
            font-size: 16px;
            width: 16px;
        }

        /* Main Content - Sem Conflitos */
        .main-content {
            flex: 1;
            margin-left: 240px;
            padding: 80px 24px 110px 24px; /* Top: espaço para toggle, Bottom: espaço para player */
            overflow-y: auto;
            height: calc(100vh - 90px);
            position: relative;
            z-index: 10;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .main-content.expanded {
            margin-left: 0;
        }

        /* Header */
        .header {
            margin-bottom: 32px;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 24px;
            color: #ffffff;
        }

        .search-container {
            position: relative;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 48px;
            border: none;
            border-radius: 24px;
            background: #ffffff;
            color: #000000;
            font-size: 14px;
            font-weight: 500;
            outline: none;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #000000;
            font-size: 16px;
        }

        /* Music Grid */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 24px;
        }

        .music-card {
            background: rgba(24, 24, 24, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .music-card:hover {
            background: rgba(40, 40, 40, 0.9);
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .card-cover {
            width: 100%;
            aspect-ratio: 1;
            background: linear-gradient(135deg, #404040 0%, #2a2a2a 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
        }

        .card-cover i {
            font-size: 24px;
            color: #b3b3b3;
            opacity: 0.7;
        }

        .card-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .card-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.3s ease;
        }

        .music-card:hover .card-controls {
            opacity: 1;
            transform: translateY(0);
        }

        .card-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
        }

        .play-button {
            background: #1DB954;
            color: #000000;
        }

        .play-button:hover {
            background: #1ed760;
            transform: scale(1.1);
        }

        .download-button {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .download-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .favorite-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 32px;
            height: 32px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: none;
            color: #b3b3b3;
            font-size: 14px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 15;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-card:hover .favorite-btn {
            opacity: 1;
        }

        .favorite-btn.active {
            color: #1DB954;
            background: rgba(29, 185, 84, 0.3);
            opacity: 1;
        }

        .favorite-btn:hover {
            color: #1DB954;
            background: rgba(29, 185, 84, 0.3);
            transform: scale(1.05);
        }

        .card-info {
            padding: 0 4px;
        }

        .card-title {
            font-size: 15px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 4px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            line-height: 1.3;
        }

        .card-artist {
            font-size: 13px;
            color: #b3b3b3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            line-height: 1.2;
        }

        /* Player - Layout Limpo e Organizado */
        .player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 90px;
            background: rgba(24, 24, 24, 0.98);
            backdrop-filter: blur(25px);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            align-items: center;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        /* Player Left - Informações da Música */
        .player-left {
            display: flex;
            align-items: center;
            gap: 16px;
            min-width: 0;
        }

        .player-cover {
            width: 56px;
            height: 56px;
            background: #404040;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
        }

        .player-cover i {
            font-size: 20px;
            color: #b3b3b3;
        }

        .player-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-info {
            min-width: 0;
            flex: 1;
        }

        .player-info h4 {
            font-size: 14px;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 2px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .player-info p {
            font-size: 12px;
            color: #b3b3b3;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Player Center - Controles e Progresso */
        .player-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            max-width: 600px;
            margin: 0 auto;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .control-btn {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 14px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            color: #ffffff;
            transform: scale(1.1);
        }

        .play-pause-btn {
            width: 40px;
            height: 40px;
            background: #ffffff;
            color: #000000;
            font-size: 16px;
        }

        .play-pause-btn:hover {
            transform: scale(1.1);
            background: #ffffff;
            color: #000000;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            max-width: 500px;
        }

        .time-display {
            font-size: 12px;
            color: #b3b3b3;
            min-width: 40px;
            text-align: center;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: #404040;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-bar:hover .progress-fill {
            background: #1ed760;
        }

        /* Player Right - Volume e Letras */
        .player-right {
            display: flex;
            align-items: center;
            gap: 12px;
            justify-content: flex-end;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            background: #404040;
            border-radius: 2px;
            cursor: pointer;
            position: relative;
        }

        .volume-fill {
            height: 100%;
            background: #1DB954;
            border-radius: 2px;
            width: 100%;
        }

        /* Botão de Letras - Canto Superior Direito */
        .lyrics-toggle {
            position: fixed;
            top: 20px;
            right: 80px; /* Movido para não sobrepor com outros elementos */
            width: 44px;
            height: 44px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            z-index: 200;
            display: none; /* Oculto por padrão */
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .lyrics-toggle:hover {
            background: rgba(29, 185, 84, 0.9);
            transform: scale(1.05);
            border-color: rgba(29, 185, 84, 0.5);
        }

        /* Sidebar de Letras - Compacta no Cantinho */
        .lyrics-sidebar {
            position: fixed;
            top: 80px; /* Abaixo do botão de letras */
            right: 20px;
            width: 300px; /* Largura fixa e compacta */
            max-height: calc(100vh - 200px); /* Altura máxima */
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 20px;
            transform: translateX(350px); /* Escondido à direita */
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 150;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .lyrics-sidebar.active {
            transform: translateX(0);
        }

        .lyrics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .lyrics-title {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
        }

        .close-lyrics {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 14px;
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.2s ease;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-lyrics:hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        .lyrics-content {
            text-align: center;
        }

        .lyrics-line {
            font-size: 18px;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 12px;
            opacity: 0;
            transform: translateY(10px) scale(0.95);
            transition: all 0.5s ease;
            text-shadow: 0 0 15px rgba(29, 185, 84, 0.3);
            line-height: 1.4;
        }

        .lyrics-line.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            color: #1DB954;
            text-shadow: 0 0 20px rgba(29, 185, 84, 0.5);
        }

        .lyrics-line.fade-out {
            opacity: 0.4;
            transform: translateY(-5px) scale(0.98);
        }

        /* Modais */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #282828;
            border-radius: 12px;
            padding: 32px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-icon {
            font-size: 48px;
            color: #1DB954;
            margin-bottom: 16px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 16px;
        }

        .modal-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #404040;
            border-radius: 8px;
            background: #181818;
            color: #ffffff;
            font-size: 16px;
            margin-bottom: 24px;
            outline: none;
        }

        .modal-input:focus {
            border-color: #1DB954;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn.primary {
            background: #1DB954;
            color: #000000;
        }

        .modal-btn.primary:hover {
            background: #1ed760;
            transform: scale(1.05);
        }

        .modal-btn.secondary {
            background: transparent;
            color: #ffffff;
            border: 1px solid #404040;
        }

        .modal-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Painel de Administração */
        .admin-panel {
            position: fixed;
            right: 0;
            top: 0;
            width: 500px;
            height: 100vh;
            background: #181818;
            border-left: 1px solid #282828;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1500;
            overflow-y: auto;
        }

        .admin-panel.active {
            transform: translateX(0);
        }

        .admin-header {
            padding: 24px;
            border-bottom: 1px solid #282828;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            font-size: 24px;
            font-weight: 700;
            color: #ffffff;
        }

        .close-admin {
            background: none;
            border: none;
            color: #b3b3b3;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .close-admin:hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        .admin-content {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #404040;
            border-radius: 8px;
            background: #282828;
            color: #ffffff;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            border-color: #1DB954;
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .icon-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .icon-option {
            aspect-ratio: 1;
            border: 2px solid #404040;
            border-radius: 8px;
            background: #282828;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #b3b3b3;
            font-size: 20px;
        }

        .icon-option:hover,
        .icon-option.selected {
            border-color: #1DB954;
            color: #1DB954;
        }

        .theme-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 8px;
        }

        .theme-option {
            aspect-ratio: 2;
            border: 2px solid #404040;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }

        .theme-option:hover,
        .theme-option.selected {
            border-color: #1DB954;
        }

        .theme-option.sweater { background: linear-gradient(135deg, #050a15 0%, #0d1a2f 100%); }
        .theme-option.sunset { background: linear-gradient(135deg, #1a0a0f 0%, #2f1520 100%); }
        .theme-option.forest { background: linear-gradient(135deg, #0a150a 0%, #152f15 100%); }
        .theme-option.purple { background: linear-gradient(135deg, #150a1a 0%, #2f1540 100%); }
        .theme-option.ocean { background: linear-gradient(135deg, #0a1520 0%, #153040 100%); }
        .theme-option.gold { background: linear-gradient(135deg, #1a1510 0%, #2f2515 100%); }
        .theme-option.neon { background: linear-gradient(135deg, #0f0a1a 0%, #1a0f2f 100%); }
        .theme-option.rose { background: linear-gradient(135deg, #1a0a15 0%, #2f152a 100%); }
        .theme-option.mint { background: linear-gradient(135deg, #0a1a15 0%, #152f25 100%); }
        .theme-option.cyber { background: linear-gradient(135deg, #0a1a1a 0%, #152f2f 100%); }

        .submit-btn {
            width: 100%;
            padding: 16px;
            background: #1DB954;
            color: #000000;
            border: none;
            border-radius: 24px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 24px;
        }

        .submit-btn:hover {
            background: #1ed760;
            transform: translateY(-2px);
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: #1DB954;
            color: #000000;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            z-index: 3000;
            transform: translateX(calc(100% + 50px)); /* Completamente escondido */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 300px;
            word-wrap: break-word;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: #e53e3e;
            color: #ffffff;
        }

        /* Estados vazios */
        .empty-state {
            text-align: center;
            padding: 48px 24px;
            color: #b3b3b3;
        }

        .empty-state i {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .empty-state p {
            font-size: 16px;
        }

        /* Mobile Responsivo */
        @media (max-width: 768px) {
            /* Sidebar Mobile */
            .sidebar {
                width: 70px;
                padding: 20px 8px;
            }

            .sidebar.hidden {
                transform: translateX(-100%);
            }

            /* Toggles Mobile */
            .sidebar-toggle {
                top: 16px;
                left: 16px;
                width: 40px;
                height: 40px;
                font-size: 14px;
            }

            .lyrics-toggle {
                top: 16px;
                right: 70px; /* Espaçamento maior no mobile */
                width: 40px;
                height: 40px;
                font-size: 14px;
            }

            /* Logo Mobile */
            .logo span {
                display: none;
            }

            .logo i {
                font-size: 20px;
            }

            /* Navegação Mobile */
            .nav-link span {
                display: none;
            }

            .nav-link {
                justify-content: center;
                padding: 12px 8px;
            }

            .nav-link i {
                font-size: 18px;
            }

            /* Main Content Mobile */
            .main-content {
                margin-left: 70px;
                padding: 70px 16px 110px 16px;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            /* Sidebar de Letras Mobile */
            .lyrics-sidebar {
                top: 70px;
                right: 16px;
                left: 16px;
                width: auto;
                max-height: calc(100vh - 180px);
                border-radius: 12px;
                transform: translateY(-100vh); /* Escondido acima */
                z-index: 250; /* Z-index maior para ficar acima de tudo */
            }

            .lyrics-sidebar.active {
                transform: translateY(0);
            }

            /* Header Mobile */
            .welcome-title {
                font-size: 24px;
                margin-bottom: 20px;
            }

            .search-container {
                max-width: 100%;
            }

            .search-input {
                font-size: 16px; /* Evitar zoom no iOS */
            }

            /* Grid Mobile */
            .music-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }

            .music-card {
                padding: 12px;
            }

            .card-controls {
                opacity: 1;
                transform: translateY(0);
            }

            .favorite-btn {
                opacity: 1;
            }

            /* Player Mobile */
            .player {
                height: 90px;
                padding: 12px 16px;
                grid-template-columns: auto 1fr auto;
                gap: 12px;
            }

            .player-left {
                gap: 12px;
                min-width: 0;
                flex: 0 0 auto;
            }

            .player-cover {
                width: 48px;
                height: 48px;
            }

            .player-info {
                display: none; /* Ocultar no mobile para economizar espaço */
            }

            .player-center {
                gap: 6px;
            }

            .player-controls {
                gap: 8px;
            }

            .control-btn {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .play-pause-btn {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }

            .progress-container {
                gap: 8px;
            }

            .time-display {
                font-size: 10px;
                min-width: 30px;
            }

            .player-right {
                gap: 8px;
                flex: 0 0 auto;
            }

            .volume-container {
                gap: 6px;
            }

            .volume-slider {
                width: 50px;
            }

            /* Modais Mobile */
            .modal-content {
                padding: 24px 20px;
                margin: 20px;
            }

            .admin-panel {
                width: 100%;
            }

            .admin-content {
                padding: 20px 16px;
            }

            .form-input,
            .form-select,
            .form-textarea {
                font-size: 16px; /* Evitar zoom no iOS */
            }

            .theme-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            /* Toast Mobile */
            .toast {
                top: 70px;
                right: 16px;
                left: 16px;
                max-width: none;
                transform: translateY(-150px); /* Completamente escondido acima */
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .toast.show {
                transform: translateY(0);
            }
        }

        /* Animação de erro */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 48px;
        }

        .spinner {
            width: 32px;
            height: 32px;
            border: 3px solid #404040;
            border-top: 3px solid #1DB954;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Controles Fixos - Sem Sobreposições --> <button class="sidebar-toggle" id="sidebarToggle"> <i class="fas fa-bars"></i> </button> <button class="lyrics-toggle" id="lyricsToggle"> <i class="fas fa-align-left"></i> </button> <!-- Container Principal -->
  <div class="app-container theme-sweater theme-particles" id="appContainer"><!-- Partículas Flutuantes -->
   <div class="floating-particles" id="floatingParticles"></div><!-- Sidebar -->
   <nav class="sidebar" id="sidebar">
    <div class="logo"><i class="fas fa-headphones"></i> <span>MusicPlay</span>
    </div>
    <ul class="nav-menu">
     <li class="nav-item"><a href="#" class="nav-link active" data-tab="home"> <i class="fas fa-home"></i> <span>Início</span> </a></li>
     <li class="nav-item"><a href="#" class="nav-link" data-tab="search"> <i class="fas fa-search"></i> <span>Buscar</span> </a></li>
     <li class="nav-item"><a href="#" class="nav-link" data-tab="favorites"> <i class="fas fa-star"></i> <span>Favoritos</span> </a></li>
     <li class="nav-item"><a href="#" class="nav-link" data-tab="add"> <i class="fas fa-plus"></i> <span>Adicionar</span> </a></li>
    </ul>
   </nav><!-- Conteúdo Principal -->
   <main class="main-content" id="mainContent"><!-- Header -->
    <header class="header">
     <h1 class="welcome-title" id="welcomeTitle">Bem-vindo de volta</h1>
     <div class="search-container"><i class="fas fa-search search-icon"></i> <input type="text" class="search-input" id="searchInput" placeholder="O que você quer ouvir?">
     </div>
    </header><!-- Grid de Músicas -->
    <div class="music-grid" id="musicGrid"><!-- Músicas serão carregadas aqui -->
    </div><!-- Estado Vazio -->
    <div class="empty-state" id="emptyState" style="display: none;"><i class="fas fa-music"></i>
     <h3>Nenhuma música encontrada</h3>
     <p>Adicione suas primeiras músicas para começar</p>
    </div><!-- Loading -->
    <div class="loading" id="loading" style="display: none;">
     <div class="spinner"></div>
    </div>
   </main><!-- Sidebar de Letras - Compacta no Cantinho -->
   <div class="lyrics-sidebar" id="lyricsSidebar">
    <div class="lyrics-header">
     <h3 class="lyrics-title">Letras</h3><button class="close-lyrics" id="closeLyrics"> <i class="fas fa-times"></i> </button>
    </div>
    <div class="lyrics-content" id="lyricsContent"><!-- Letras aparecerão aqui -->
    </div>
   </div>
  </div><!-- Player - Layout Limpo -->
  <div class="player" id="player"><!-- Informações da Música -->
   <div class="player-left">
    <div class="player-cover" id="playerCover"><i class="fas fa-music"></i>
    </div>
    <div class="player-info">
     <h4 id="playerTitle">Selecione uma música</h4>
     <p id="playerArtist">Artista</p>
    </div>
   </div><!-- Controles e Progresso -->
   <div class="player-center">
    <div class="player-controls"><button class="control-btn" id="shuffleBtn"> <i class="fas fa-random"></i> </button> <button class="control-btn" id="prevBtn"> <i class="fas fa-step-backward"></i> </button> <button class="control-btn play-pause-btn" id="playPauseBtn"> <i class="fas fa-play"></i> </button> <button class="control-btn" id="nextBtn"> <i class="fas fa-step-forward"></i> </button> <button class="control-btn" id="repeatBtn"> <i class="fas fa-redo"></i> </button>
    </div>
    <div class="progress-container"><span class="time-display" id="currentTime">0:00</span>
     <div class="progress-bar" id="progressBar">
      <div class="progress-fill" id="progressFill"></div>
     </div><span class="time-display" id="totalTime">0:00</span>
    </div>
   </div><!-- Volume -->
   <div class="player-right">
    <div class="volume-container"><button class="control-btn" id="volumeBtn"> <i class="fas fa-volume-up"></i> </button>
     <div class="volume-slider" id="volumeSlider">
      <div class="volume-fill" id="volumeFill"></div>
     </div>
    </div>
   </div>
  </div><!-- Modal de Senha -->
  <div class="modal" id="passwordModal">
   <div class="modal-content"><i class="fas fa-lock modal-icon"></i>
    <h2 class="modal-title">Área Administrativa</h2><input type="password" class="modal-input" id="passwordInput" placeholder="Digite a senha">
    <div class="modal-buttons"><button class="modal-btn secondary" id="cancelPassword">Cancelar</button> <button class="modal-btn primary" id="confirmPassword">Entrar</button>
    </div>
   </div>
  </div><!-- Painel de Administração -->
  <div class="admin-panel" id="adminPanel">
   <div class="admin-header">
    <h2 class="admin-title">Adicionar Música</h2><button class="close-admin" id="closeAdmin"> <i class="fas fa-times"></i> </button>
   </div>
   <div class="admin-content">
    <form id="addMusicForm">
     <div class="form-group"><label class="form-label">URL da Música ou Arquivo</label> <input type="text" class="form-input" id="musicUrl" placeholder="Cole o link do YouTube ou MP3">
      <div style="margin-top: 8px; text-align: center;"><span style="color: #b3b3b3; font-size: 12px;">ou</span>
      </div><input type="file" class="form-input" id="musicFile" accept="audio/*" style="margin-top: 8px;">
     </div>
     <div class="form-group"><label class="form-label">Nome da Música</label> <input type="text" class="form-input" id="musicTitle" placeholder="Título da música">
     </div>
     <div class="form-group"><label class="form-label">Artista</label> <input type="text" class="form-input" id="musicArtist" placeholder="Nome do artista">
     </div>
     <div class="form-group"><label class="form-label">Ícone</label>
      <div class="icon-grid" id="iconGrid">
       <div class="icon-option selected" data-icon="fas fa-music">
        <i class="fas fa-music"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-guitar">
        <i class="fas fa-guitar"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-drum">
        <i class="fas fa-drum"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-microphone">
        <i class="fas fa-microphone"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-headphones">
        <i class="fas fa-headphones"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-compact-disc">
        <i class="fas fa-compact-disc"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-record-vinyl">
        <i class="fas fa-record-vinyl"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-heart">
        <i class="fas fa-heart"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-star">
        <i class="fas fa-star"></i>
       </div>
       <div class="icon-option" data-icon="fas fa-fire">
        <i class="fas fa-fire"></i>
       </div>
      </div>
     </div>
     <div class="form-group"><label class="form-label">Tema de Fundo</label>
      <div class="theme-grid" id="themeGrid">
       <div class="theme-option selected sweater" data-theme="sweater"></div>
       <div class="theme-option sunset" data-theme="sunset"></div>
       <div class="theme-option forest" data-theme="forest"></div>
       <div class="theme-option purple" data-theme="purple"></div>
       <div class="theme-option ocean" data-theme="ocean"></div>
       <div class="theme-option gold" data-theme="gold"></div>
       <div class="theme-option neon" data-theme="neon"></div>
       <div class="theme-option rose" data-theme="rose"></div>
       <div class="theme-option mint" data-theme="mint"></div>
       <div class="theme-option cyber" data-theme="cyber"></div>
      </div>
     </div>
     <div class="form-group"><label class="form-label">Letras/Texto</label> <textarea class="form-textarea" id="musicLyrics" placeholder="Digite as letras linha por linha..."></textarea>
     </div>
     <div class="form-group"><label class="form-label">Intervalo entre linhas (segundos)</label> <input type="number" class="form-input" id="lyricsInterval" value="3" min="1" max="10">
     </div><button type="submit" class="submit-btn"> <i class="fas fa-plus"></i> Adicionar Música </button>
    </form>
   </div>
  </div><!-- Toast Notifications -->
  <div class="toast" id="toast"></div><!-- Audio Elements -->
  <audio id="audioPlayer" preload="metadata"></audio><!-- Firebase SDK -->
  <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getDatabase, ref, push, set, onValue, remove } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD2uryhbal6zUmbhAyfUoElJaE5CyMIwfM",
            authDomain: "dengoplay-9defc.firebaseapp.com",
            databaseURL: "https://dengoplay-9defc-default-rtdb.firebaseio.com",
            projectId: "dengoplay-9defc",
            storageBucket: "dengoplay-9defc.firebasestorage.app",
            messagingSenderId: "933875447662",
            appId: "1:933875447662:web:9e073c0fc0b092be90b37f",
            measurementId: "G-JQLHXD6QEW"
        };

        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        window.firebaseDB = database;
        window.firebaseRef = ref;
        window.firebasePush = push;
        window.firebaseSet = set;
        window.firebaseOnValue = onValue;
        window.firebaseRemove = remove;
    </script>
  <script>
        // Variáveis Globais
        let currentSong = null;
        let currentIndex = 0;
        let isPlaying = false;
        let songs = [];
        let filteredSongs = [];
        let currentTab = 'home';
        let isAuthenticated = false;
        let currentTheme = 'sweater';
        let currentLyrics = [];
        let lyricsInterval = null;
        let currentLyricsIndex = 0;

        // Elementos DOM
        const elements = {
            sidebar: document.getElementById('sidebar'),
            mainContent: document.getElementById('mainContent'),
            musicGrid: document.getElementById('musicGrid'),
            emptyState: document.getElementById('emptyState'),
            loading: document.getElementById('loading'),
            searchInput: document.getElementById('searchInput'),
            welcomeTitle: document.getElementById('welcomeTitle'),
            
            // Player
            player: document.getElementById('player'),
            playerCover: document.getElementById('playerCover'),
            playerTitle: document.getElementById('playerTitle'),
            playerArtist: document.getElementById('playerArtist'),
            playPauseBtn: document.getElementById('playPauseBtn'),
            prevBtn: document.getElementById('prevBtn'),
            nextBtn: document.getElementById('nextBtn'),
            shuffleBtn: document.getElementById('shuffleBtn'),
            repeatBtn: document.getElementById('repeatBtn'),
            progressBar: document.getElementById('progressBar'),
            progressFill: document.getElementById('progressFill'),
            currentTime: document.getElementById('currentTime'),
            totalTime: document.getElementById('totalTime'),
            volumeBtn: document.getElementById('volumeBtn'),
            volumeSlider: document.getElementById('volumeSlider'),
            volumeFill: document.getElementById('volumeFill'),
            
            // Modais e Painéis
            passwordModal: document.getElementById('passwordModal'),
            passwordInput: document.getElementById('passwordInput'),
            confirmPassword: document.getElementById('confirmPassword'),
            cancelPassword: document.getElementById('cancelPassword'),
            adminPanel: document.getElementById('adminPanel'),
            closeAdmin: document.getElementById('closeAdmin'),
            
            // Formulário
            addMusicForm: document.getElementById('addMusicForm'),
            musicUrl: document.getElementById('musicUrl'),
            musicFile: document.getElementById('musicFile'),
            musicTitle: document.getElementById('musicTitle'),
            musicArtist: document.getElementById('musicArtist'),
            musicLyrics: document.getElementById('musicLyrics'),
            lyricsInterval: document.getElementById('lyricsInterval'),
            iconGrid: document.getElementById('iconGrid'),
            themeGrid: document.getElementById('themeGrid'),
            
            // Letras
            lyricsSidebar: document.getElementById('lyricsSidebar'),
            closeLyrics: document.getElementById('closeLyrics'),
            lyricsContent: document.getElementById('lyricsContent'),
            lyricsToggle: document.getElementById('lyricsToggle'),
            
            // Controles
            sidebarToggle: document.getElementById('sidebarToggle'),
            
            // Toast
            toast: document.getElementById('toast'),
            
            // Audio
            audioPlayer: document.getElementById('audioPlayer'),
            
            // Container
            appContainer: document.getElementById('appContainer'),
            floatingParticles: document.getElementById('floatingParticles')
        };

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadSongs();
            createParticles();
        });

        // Função de Inicialização
        function initializeApp() {
            console.log('MusicPlay iniciado!');
            
            // Configurar volume inicial
            elements.audioPlayer.volume = 1;
            updateVolumeDisplay(1);
            
            // Configurar tema inicial
            changeTheme('sweater');
        }

        // Event Listeners
        function setupEventListeners() {
            // Navegação
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', handleNavigation);
            });
            
            // Busca
            elements.searchInput.addEventListener('input', handleSearch);
            
            // Player Controls
            elements.playPauseBtn.addEventListener('click', togglePlayPause);
            elements.prevBtn.addEventListener('click', playPrevious);
            elements.nextBtn.addEventListener('click', playNext);
            elements.shuffleBtn.addEventListener('click', toggleShuffle);
            elements.repeatBtn.addEventListener('click', toggleRepeat);
            
            // Progress Bar
            elements.progressBar.addEventListener('click', handleProgressClick);
            
            // Volume
            elements.volumeSlider.addEventListener('click', handleVolumeClick);
            elements.volumeBtn.addEventListener('click', toggleMute);
            
            // Modal de Senha
            elements.confirmPassword.addEventListener('click', checkPassword);
            elements.cancelPassword.addEventListener('click', closePasswordModal);
            elements.passwordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') checkPassword();
            });
            
            // Admin Panel
            elements.closeAdmin.addEventListener('click', closeAdminPanel);
            elements.addMusicForm.addEventListener('submit', handleAddMusic);
            
            // URL Input
            elements.musicUrl.addEventListener('input', handleUrlInput);
            
            // File Input
            elements.musicFile.addEventListener('change', handleFileUpload);
            
            // Seleção de Ícones
            elements.iconGrid.addEventListener('click', handleIconSelection);
            
            // Seleção de Temas
            elements.themeGrid.addEventListener('click', handleThemeSelection);
            
            // Letras
            elements.closeLyrics.addEventListener('click', closeLyricsSidebar);
            elements.lyricsToggle.addEventListener('click', toggleLyricsSidebar);
            
            // Controles das Sidebars
            elements.sidebarToggle.addEventListener('click', toggleSidebar);
            
            // Audio Events
            elements.audioPlayer.addEventListener('timeupdate', updateProgress);
            elements.audioPlayer.addEventListener('loadedmetadata', updateDuration);
            elements.audioPlayer.addEventListener('ended', playNext);
            
            // Fechar modais clicando fora
            elements.passwordModal.addEventListener('click', function(e) {
                if (e.target === elements.passwordModal) {
                    closePasswordModal();
                }
            });
        }

        // Navegação
        function handleNavigation(e) {
            e.preventDefault();
            const tab = e.currentTarget.dataset.tab;
            
            if (tab === 'add' && !isAuthenticated) {
                openPasswordModal();
                return;
            }
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            e.currentTarget.classList.add('active');
            currentTab = tab;
            updatePageTitle(tab);
            
            switch(tab) {
                case 'home':
                    showAllSongs();
                    break;
                case 'search':
                    showSearchTab();
                    break;
                case 'favorites':
                    showFavorites();
                    break;
                case 'add':
                    openAdminPanel();
                    break;
            }
        }

        function updatePageTitle(tab) {
            const titles = {
                'home': 'Bem-vindo de volta',
                'search': 'Buscar Músicas',
                'favorites': 'Suas Músicas Favoritas',
                'add': 'Adicionar Nova Música'
            };
            
            elements.welcomeTitle.textContent = titles[tab] || 'MusicPlay';
        }

        function showSearchTab() {
            elements.searchInput.focus();
            
            if (!elements.searchInput.value.trim()) {
                filteredSongs = [...songs];
            }
            
            renderSongs();
        }

        function handleSearch() {
            const query = elements.searchInput.value.toLowerCase().trim();
            
            if (query === '') {
                filteredSongs = [...songs];
            } else {
                filteredSongs = songs.filter(song => 
                    song.title.toLowerCase().includes(query) ||
                    song.artist.toLowerCase().includes(query)
                );
            }
            
            renderSongs();
        }

        function showAllSongs() {
            filteredSongs = [...songs];
            renderSongs();
        }

        function showFavorites() {
            filteredSongs = songs.filter(song => song.favorite);
            renderSongs();
        }

        // Carregar músicas do Firebase
        function loadSongs() {
            if (!window.firebaseDB) {
                setTimeout(loadSongs, 1000);
                return;
            }
            
            elements.loading.style.display = 'flex';
            
            const songsRef = window.firebaseRef(window.firebaseDB, 'songs');
            window.firebaseOnValue(songsRef, (snapshot) => {
                const data = snapshot.val();
                songs = [];
                
                if (data) {
                    Object.keys(data).forEach(key => {
                        const song = { id: key, ...data[key] };
                        
                        if (song.title && song.artist) {
                            songs.push(song);
                        }
                    });
                }
                
                songs.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0));
                filteredSongs = [...songs];
                renderSongs();
                elements.loading.style.display = 'none';
                
                console.log(`${songs.length} músicas carregadas`);
            });
        }

        // Renderizar músicas
        function renderSongs() {
            if (filteredSongs.length === 0) {
                elements.musicGrid.style.display = 'none';
                elements.emptyState.style.display = 'block';
                return;
            }
            
            elements.emptyState.style.display = 'none';
            elements.musicGrid.style.display = 'grid';
            
            elements.musicGrid.innerHTML = filteredSongs.map((song, index) => `
                <div class="music-card" data-index="${index}" onclick="playSong(${index})">
                    <div class="card-cover">
                        <i class="${song.icon || 'fas fa-music'}"></i>
                        ${song.thumbnail ? `<img src="${song.thumbnail}" alt="${song.title}">` : ''}
                        <button class="favorite-btn ${song.favorite ? 'active' : ''}" onclick="toggleFavorite(event, '${song.id}')">
                            <i class="fas fa-heart"></i>
                        </button>
                        <div class="card-controls">
                            <button class="card-btn download-button" onclick="downloadSong(event, ${index})">
                                <i class="fas fa-download"></i>
                            </button>
                            <button class="card-btn play-button" onclick="playSong(${index})">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-info">
                        <h3 class="card-title">${song.title}</h3>
                        <p class="card-artist">${song.artist}</p>
                    </div>
                </div>
            `).join('');
        }

        // Tocar música
        function playSong(index) {
            if (index < 0 || index >= filteredSongs.length) return;
            
            currentIndex = index;
            currentSong = filteredSongs[index];
            
            updatePlayerUI();
            
            if (currentSong.theme) {
                changeTheme(currentSong.theme);
            }
            
            if (currentSong.lyrics) {
                prepareLyrics(currentSong.lyrics, currentSong.lyricsInterval || 3);
                showLyricsSidebar();
            }
            
            if (currentSong.type === 'youtube') {
                showToast('Abrindo YouTube em nova aba');
                const youtubeUrl = `https://www.youtube.com/watch?v=${currentSong.youtubeId}`;
                window.open(youtubeUrl, '_blank');
                return;
            } else {
                playMP3(currentSong.url);
            }
        }

        function updatePlayerUI() {
            if (!currentSong) return;
            
            elements.playerTitle.textContent = currentSong.title;
            elements.playerArtist.textContent = currentSong.artist;
            
            elements.playerCover.innerHTML = currentSong.thumbnail ? 
                `<img src="${currentSong.thumbnail}" alt="${currentSong.title}">` :
                `<i class="${currentSong.icon || 'fas fa-music'}"></i>`;
        }

        function playMP3(url) {
            if (!url) {
                showToast('URL da música não encontrada!', 'error');
                return;
            }
            
            elements.audioPlayer.pause();
            elements.audioPlayer.currentTime = 0;
            
            try {
                elements.audioPlayer.src = url;
                elements.audioPlayer.load();
                
                elements.audioPlayer.addEventListener('canplay', function onCanPlay() {
                    elements.audioPlayer.removeEventListener('canplay', onCanPlay);
                    
                    const playPromise = elements.audioPlayer.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            isPlaying = true;
                            updatePlayButton();
                            startLyrics();
                        }).catch(error => {
                            console.error('Erro ao tocar:', error);
                            handlePlayError(error);
                        });
                    }
                });
                
                elements.audioPlayer.addEventListener('error', function onError(e) {
                    elements.audioPlayer.removeEventListener('error', onError);
                    console.error('Erro no áudio:', e);
                    showToast('Erro ao reproduzir áudio', 'error');
                    isPlaying = false;
                    updatePlayButton();
                });
                
            } catch (error) {
                console.error('Erro ao configurar áudio:', error);
                showToast('Erro ao configurar reprodução', 'error');
                isPlaying = false;
                updatePlayButton();
            }
        }

        function handlePlayError(error) {
            isPlaying = false;
            updatePlayButton();
            
            switch(error.name) {
                case 'NotAllowedError':
                    showToast('Clique em play novamente para iniciar');
                    break;
                case 'NotSupportedError':
                    showToast('Formato de áudio não suportado', 'error');
                    break;
                default:
                    showToast('Erro ao reproduzir - Tente novamente', 'error');
            }
        }

        function togglePlayPause() {
            if (!currentSong) return;
            
            if (currentSong.type === 'youtube') {
                const youtubeUrl = `https://www.youtube.com/watch?v=${currentSong.youtubeId}`;
                window.open(youtubeUrl, '_blank');
                showToast('Abrindo YouTube em nova aba');
                return;
            }
            
            if (isPlaying) {
                elements.audioPlayer.pause();
                isPlaying = false;
                pauseLyrics();
            } else {
                const playPromise = elements.audioPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isPlaying = true;
                        startLyrics();
                    }).catch(error => {
                        console.error('Erro ao tocar:', error);
                        showToast('Erro ao reproduzir áudio');
                    });
                }
            }
            updatePlayButton();
        }

        function updatePlayButton() {
            const icon = elements.playPauseBtn.querySelector('i');
            icon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
        }

        function playPrevious() {
            if (currentIndex > 0) {
                playSong(currentIndex - 1);
            } else {
                playSong(filteredSongs.length - 1);
            }
        }

        function playNext() {
            if (currentIndex < filteredSongs.length - 1) {
                playSong(currentIndex + 1);
            } else {
                playSong(0);
            }
        }

        function toggleShuffle() {
            elements.shuffleBtn.classList.toggle('active');
        }

        function toggleRepeat() {
            elements.repeatBtn.classList.toggle('active');
        }

        function updateProgress() {
            if (!currentSong || currentSong.type === 'youtube') return;
            
            const currentTime = elements.audioPlayer.currentTime || 0;
            const duration = elements.audioPlayer.duration || 0;
            
            if (duration > 0 && !isNaN(duration)) {
                const progress = (currentTime / duration) * 100;
                elements.progressFill.style.width = `${Math.min(progress, 100)}%`;
                
                elements.currentTime.textContent = formatTime(currentTime);
                elements.totalTime.textContent = formatTime(duration);
            }
        }

        function updateDuration() {
            const duration = elements.audioPlayer.duration;
            if (duration && !isNaN(duration)) {
                elements.totalTime.textContent = formatTime(duration);
            }
        }

        function formatTime(seconds) {
            if (!seconds || isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function handleProgressClick(e) {
            if (!currentSong) return;
            
            const rect = elements.progressBar.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const width = rect.width;
            const percentage = Math.max(0, Math.min(1, clickX / width));
            
            const duration = elements.audioPlayer.duration;
            if (duration && !isNaN(duration)) {
                elements.audioPlayer.currentTime = duration * percentage;
            }
        }

        function handleVolumeClick(e) {
            const rect = elements.volumeSlider.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const width = rect.width;
            const volume = Math.max(0, Math.min(1, clickX / width));
            
            elements.audioPlayer.volume = volume;
            updateVolumeDisplay(volume);
        }

        function updateVolumeDisplay(volume) {
            elements.volumeFill.style.width = `${volume * 100}%`;
            
            const icon = elements.volumeBtn.querySelector('i');
            if (volume === 0) {
                icon.className = 'fas fa-volume-mute';
            } else if (volume < 0.5) {
                icon.className = 'fas fa-volume-down';
            } else {
                icon.className = 'fas fa-volume-up';
            }
        }

        function toggleMute() {
            const currentVolume = elements.audioPlayer.volume;
            
            if (currentVolume > 0) {
                elements.audioPlayer.volume = 0;
                updateVolumeDisplay(0);
            } else {
                elements.audioPlayer.volume = 1;
                updateVolumeDisplay(1);
            }
        }

        // Sistema de download
        function downloadSong(event, index) {
            event.stopPropagation();
            
            const song = filteredSongs[index];
            if (!song) return;
            
            if (song.type === 'youtube') {
                const youtubeUrl = `https://www.youtube.com/watch?v=${song.youtubeId}`;
                window.open(youtubeUrl, '_blank', 'noopener,noreferrer');
                showToast('Abrindo YouTube em nova aba');
                return;
            }
            
            if (song.url) {
                try {
                    let extension = '.mp3';
                    if (song.fileName) {
                        const fileExt = song.fileName.split('.').pop();
                        if (fileExt) extension = '.' + fileExt;
                    }
                    
                    const link = document.createElement('a');
                    link.href = song.url;
                    link.download = `${song.title} - ${song.artist}${extension}`;
                    link.style.display = 'none';
                    
                    document.body.appendChild(link);
                    link.click();
                    
                    setTimeout(() => {
                        document.body.removeChild(link);
                    }, 100);
                    
                    showToast(`Baixando: ${song.title}`);
                    
                } catch (error) {
                    console.error('Erro no download:', error);
                    showToast('Erro ao baixar música', 'error');
                }
            } else {
                showToast('URL da música não encontrada', 'error');
            }
        }

        // Modal de Senha
        function openPasswordModal() {
            elements.passwordModal.classList.add('active');
            elements.passwordInput.focus();
        }

        function closePasswordModal() {
            elements.passwordModal.classList.remove('active');
            elements.passwordInput.value = '';
        }

        function checkPassword() {
            const password = elements.passwordInput.value;
            
            if (password === 'admin123') {
                isAuthenticated = true;
                closePasswordModal();
                openAdminPanel();
                showToast('Acesso liberado!');
            } else {
                elements.passwordInput.classList.add('shake');
                setTimeout(() => {
                    elements.passwordInput.classList.remove('shake');
                }, 500);
                showToast('Senha incorreta!', 'error');
            }
        }

        // Admin Panel
        function openAdminPanel() {
            elements.adminPanel.classList.add('active');
        }

        function closeAdminPanel() {
            elements.adminPanel.classList.remove('active');
        }

        function handleUrlInput() {
            const url = elements.musicUrl.value.trim();
            
            if (url) {
                elements.musicFile.value = '';
            }
            
            if (url.includes('youtube.com') || url.includes('youtu.be')) {
                const videoId = extractYouTubeId(url);
                if (videoId) {
                    fetchYouTubeInfo(videoId);
                }
            }
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            elements.musicUrl.value = '';
            
            if (!file.type.startsWith('audio/')) {
                showToast('Por favor, selecione um arquivo de áudio válido!', 'error');
                elements.musicFile.value = '';
                return;
            }
            
            const maxSize = 50 * 1024 * 1024;
            if (file.size > maxSize) {
                showToast('Arquivo muito grande! Máximo 50MB.', 'error');
                elements.musicFile.value = '';
                return;
            }
            
            if (!elements.musicTitle.value) {
                const fileName = file.name.replace(/\.[^/.]+$/, "");
                elements.musicTitle.value = fileName;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                window.tempFileData = {
                    data: e.target.result,
                    name: file.name,
                    type: file.type,
                    size: file.size
                };
                showToast('Arquivo carregado: ' + file.name);
            };
            reader.onerror = function() {
                showToast('Erro ao processar arquivo!', 'error');
                elements.musicFile.value = '';
            };
            reader.readAsDataURL(file);
        }

        function extractYouTubeId(url) {
            let id = null;

            if (url.includes("youtu.be")) {
                id = url.split("youtu.be/")[1].split("?")[0].split("&")[0];
            } else if (url.includes("v=")) {
                id = url.split("v=")[1].split("&")[0];
            } else if (url.includes("embed/")) {
                id = url.split("embed/")[1].split("?")[0];
            }

            return (id && id.length === 11) ? id : null;
        }

        function fetchYouTubeInfo(videoId) {
            fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.title) {
                        elements.musicTitle.value = data.title;
                        elements.musicArtist.value = data.author_name || '';
                    }
                })
                .catch(error => {
                    console.error('Erro ao buscar informações do YouTube:', error);
                });
        }

        function handleIconSelection(e) {
            const iconOption = e.target.closest('.icon-option');
            if (!iconOption) return;
            
            document.querySelectorAll('.icon-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            iconOption.classList.add('selected');
        }

        function handleThemeSelection(e) {
            const themeOption = e.target.closest('.theme-option');
            if (!themeOption) return;
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            themeOption.classList.add('selected');
        }

        function validateUrl(url) {
            try {
                new URL(url);
                return true;
            } catch {
                return false;
            }
        }

        function handleAddMusic(e) {
            e.preventDefault();
            
            const url = elements.musicUrl.value.trim();
            const file = elements.musicFile.files[0];
            const title = elements.musicTitle.value.trim();
            const artist = elements.musicArtist.value.trim();
            const lyrics = elements.musicLyrics.value.trim();
            const lyricsInterval = parseInt(elements.lyricsInterval.value) || 3;
            
            const selectedIcon = document.querySelector('.icon-option.selected');
            const selectedTheme = document.querySelector('.theme-option.selected');
            
            if (!url && !file) {
                showToast('Adicione uma URL ou selecione um arquivo!', 'error');
                return;
            }
            
            if (!title || !artist) {
                showToast('Preencha o título e artista!', 'error');
                return;
            }
            
            if (url && !validateUrl(url)) {
                showToast('URL inválida! Verifique o link.', 'error');
                return;
            }
            
            let songData = {
                title,
                artist,
                icon: selectedIcon ? selectedIcon.dataset.icon : 'fas fa-music',
                theme: selectedTheme ? selectedTheme.dataset.theme : 'sweater',
                lyrics,
                lyricsInterval,
                favorite: false,
                createdAt: Date.now()
            };
            
            if (file || window.tempFileData) {
                const fileData = window.tempFileData;
                if (!fileData) {
                    showToast('Erro: Arquivo não processado corretamente!', 'error');
                    return;
                }
                
                songData.url = fileData.data;
                songData.type = 'mp3';
                songData.fileName = fileData.name;
                songData.fileSize = fileData.size;
                songData.mimeType = fileData.type;
                songData.isLocalFile = true;
                
                window.tempFileData = null;
                
            } else if (url) {
                songData.url = url;
                
                if (url.includes('youtube.com') || url.includes('youtu.be')) {
                    songData.type = 'youtube';
                    songData.youtubeId = extractYouTubeId(url);
                    
                    if (!songData.youtubeId) {
                        showToast('ID do YouTube inválido!', 'error');
                        return;
                    }
                } else {
                    songData.type = 'mp3';
                }
            }
            
            const songsRef = window.firebaseRef(window.firebaseDB, 'songs');
            window.firebasePush(songsRef, songData)
                .then(() => {
                    showToast('Música adicionada com sucesso!');
                    elements.addMusicForm.reset();
                    closeAdminPanel();
                    
                    document.querySelectorAll('.icon-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    document.querySelector('.icon-option').classList.add('selected');
                    
                    document.querySelectorAll('.theme-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    document.querySelector('.theme-option').classList.add('selected');
                })
                .catch(error => {
                    console.error('Erro ao adicionar música:', error);
                    showToast('Erro ao adicionar música!', 'error');
                });
        }

        function toggleFavorite(event, songId) {
            event.stopPropagation();
            
            const song = songs.find(s => s.id === songId);
            if (!song) return;
            
            const newFavoriteStatus = !song.favorite;
            
            const songRef = window.firebaseRef(window.firebaseDB, `songs/${songId}`);
            window.firebaseSet(songRef, {
                ...song,
                favorite: newFavoriteStatus
            })
            .then(() => {
                showToast(newFavoriteStatus ? 'Adicionado aos favoritos!' : 'Removido dos favoritos!');
            })
            .catch(error => {
                console.error('Erro ao atualizar favorito:', error);
                showToast('Erro ao atualizar favorito!', 'error');
            });
        }

        function changeTheme(theme) {
            currentTheme = theme;
            
            elements.appContainer.className = 'app-container theme-particles';
            elements.appContainer.classList.add(`theme-${theme}`);
            
            createParticles();
        }

        function createParticles() {
            elements.floatingParticles.innerHTML = '';
            
            for (let i = 0; i < 6; i++) {
                createParticle(i * 1000);
            }
            
            setInterval(() => {
                if (elements.floatingParticles.children.length < 12) {
                    createParticle();
                }
            }, 3000);
        }

        function createParticle(delay = 0) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const leftPosition = 5 + Math.random() * 90;
            particle.style.left = leftPosition + '%';
            
            const drift = (Math.random() - 0.5) * 60;
            particle.style.setProperty('--drift', drift + 'px');
            
            const duration = 15 + Math.random() * 8;
            particle.style.animationDuration = duration + 's';
            particle.style.animationDelay = delay + 'ms';
            
            const size = 2 + Math.random() * 3;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            
            const brightness = Math.random();
            if (brightness > 0.7) {
                particle.style.opacity = '0.7';
                particle.style.filter = 'brightness(1.3)';
            } else {
                particle.style.opacity = '0.4';
                particle.style.filter = 'brightness(0.9)';
            }
            
            elements.floatingParticles.appendChild(particle);
            
            setTimeout(() => {
                if (particle && particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, (duration * 1000) + delay + 1000);
        }

        // Sistema de Letras
        function prepareLyrics(lyricsText, interval) {
            if (!lyricsText) return;
            
            currentLyrics = lyricsText.split('\n').filter(line => line.trim() !== '');
            currentLyricsIndex = 0;
            
            elements.lyricsContent.innerHTML = '';
            
            currentLyrics.forEach((line, index) => {
                const lyricsLine = document.createElement('div');
                lyricsLine.className = 'lyrics-line';
                lyricsLine.textContent = line.trim();
                lyricsLine.dataset.index = index;
                elements.lyricsContent.appendChild(lyricsLine);
            });
        }

        function startLyrics() {
            if (currentLyrics.length === 0) return;
            
            clearInterval(lyricsInterval);
            currentLyricsIndex = 0;
            
            showLyricsLine(0);
            
            const interval = (currentSong && currentSong.lyricsInterval) || 3;
            lyricsInterval = setInterval(() => {
                currentLyricsIndex++;
                if (currentLyricsIndex < currentLyrics.length) {
                    showLyricsLine(currentLyricsIndex);
                } else {
                    clearInterval(lyricsInterval);
                }
            }, interval * 1000);
        }

        function pauseLyrics() {
            clearInterval(lyricsInterval);
        }

        function showLyricsLine(index) {
            const lines = elements.lyricsContent.querySelectorAll('.lyrics-line');
            
            lines.forEach((line, i) => {
                if (i < index) {
                    line.classList.add('fade-out');
                    line.classList.remove('active');
                } else if (i === index) {
                    line.classList.add('active');
                    line.classList.remove('fade-out');
                } else {
                    line.classList.remove('active', 'fade-out');
                }
            });
        }

        function showLyricsSidebar() {
            elements.lyricsSidebar.classList.add('active');
            elements.lyricsToggle.style.display = 'flex';
        }

        function closeLyricsSidebar() {
            elements.lyricsSidebar.classList.remove('active');
        }

        function toggleLyricsSidebar() {
            elements.lyricsSidebar.classList.toggle('active');
            
            const icon = elements.lyricsToggle.querySelector('i');
            if (elements.lyricsSidebar.classList.contains('active')) {
                icon.className = 'fas fa-times';
            } else {
                icon.className = 'fas fa-align-left';
            }
        }

        function toggleSidebar() {
            elements.sidebar.classList.toggle('hidden');
            elements.mainContent.classList.toggle('expanded');
            
            const icon = elements.sidebarToggle.querySelector('i');
            if (elements.sidebar.classList.contains('hidden')) {
                icon.className = 'fas fa-bars';
            } else {
                icon.className = 'fas fa-times';
            }
        }

        function showToast(message, type = 'success') {
            elements.toast.textContent = message;
            elements.toast.className = `toast ${type}`;
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        // Expor funções globais
        window.playSong = playSong;
        window.toggleFavorite = toggleFavorite;
        window.downloadSong = downloadSong;
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99e8b3d846081af2',t:'MTc2MzE0NjMxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
